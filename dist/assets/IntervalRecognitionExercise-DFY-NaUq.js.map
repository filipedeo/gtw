{"version":3,"file":"IntervalRecognitionExercise-DFY-NaUq.js","sources":["../../src/components/IntervalRecognitionExercise.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Exercise } from '../types/exercise';\nimport { FretPosition } from '../types/guitar';\nimport { useGuitarStore } from '../stores/guitarStore';\nimport { useExercise } from '../hooks/useExercise';\nimport { getNoteAtPosition, getRandomPosition } from '../utils/fretboardCalculations';\nimport { playNote, initAudio } from '../lib/audioEngine';\nimport Fretboard from './Fretboard';\n\ninterface IntervalRecognitionExerciseProps {\n  exercise: Exercise;\n}\n\n// Interval definitions with semitones and song references\nconst INTERVALS = [\n  { name: 'Minor 2nd', short: 'm2', semitones: 1, song: '\"Jaws\" theme' },\n  { name: 'Major 2nd', short: 'M2', semitones: 2, song: '\"Happy Birthday\" (first two notes)' },\n  { name: 'Minor 3rd', short: 'm3', semitones: 3, song: '\"Greensleeves\" (first two notes)' },\n  { name: 'Major 3rd', short: 'M3', semitones: 4, song: '\"Kumbaya\" (first two notes)' },\n  { name: 'Perfect 4th', short: 'P4', semitones: 5, song: '\"Here Comes the Bride\"' },\n  { name: 'Tritone', short: 'TT', semitones: 6, song: '\"The Simpsons\" theme' },\n  { name: 'Perfect 5th', short: 'P5', semitones: 7, song: '\"Star Wars\" theme' },\n  { name: 'Minor 6th', short: 'm6', semitones: 8, song: '\"The Entertainer\"' },\n  { name: 'Major 6th', short: 'M6', semitones: 9, song: '\"My Bonnie Lies Over the Ocean\"' },\n  { name: 'Minor 7th', short: 'm7', semitones: 10, song: '\"Somewhere\" (West Side Story)' },\n  { name: 'Major 7th', short: 'M7', semitones: 11, song: '\"Take On Me\" (first two notes)' },\n  { name: 'Octave', short: 'P8', semitones: 12, song: '\"Somewhere Over the Rainbow\"' },\n];\n\n// Get intervals based on difficulty\nfunction getIntervalsForDifficulty(difficulty: number): typeof INTERVALS {\n  if (difficulty <= 1) {\n    // Easy: P4, P5 only\n    return INTERVALS.filter(i => ['P4', 'P5'].includes(i.short));\n  } else if (difficulty <= 2) {\n    // Medium: Add M3, m3\n    return INTERVALS.filter(i => ['m3', 'M3', 'P4', 'P5'].includes(i.short));\n  } else {\n    // Hard: All intervals\n    return INTERVALS;\n  }\n}\n\nconst IntervalRecognitionExercise: React.FC<IntervalRecognitionExerciseProps> = ({ exercise }) => {\n  const { stringCount, tuning, setHighlightedPositions, clearHighlights } = useGuitarStore();\n  const { score, questionNumber, isActive, recordAnswer, scorePercentage } = useExercise({\n    exerciseId: exercise.id,\n    totalQuestions: 10,\n  });\n  \n  const [rootPosition, setRootPosition] = useState<FretPosition | null>(null);\n  const [targetPosition, setTargetPosition] = useState<FretPosition | null>(null);\n  const [correctInterval, setCorrectInterval] = useState<typeof INTERVALS[0] | null>(null);\n  const [options, setOptions] = useState<typeof INTERVALS>([]);\n  const [selectedAnswer, setSelectedAnswer] = useState<string | null>(null);\n  const [isCorrect, setIsCorrect] = useState<boolean | null>(null);\n  const [showFeedback, setShowFeedback] = useState(false);\n  const [playDirection, setPlayDirection] = useState<'ascending' | 'descending'>('ascending');\n\n  // Keyboard shortcut handler for answer selection (1, 2, 3, 4 keys)\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!isActive || selectedAnswer !== null) return;\n      \n      const keyMap: { [key: string]: number } = {\n        '1': 0,\n        '2': 1,\n        '3': 2,\n        '4': 3,\n      };\n      \n      if (e.key in keyMap) {\n        const index = keyMap[e.key];\n        if (index < options.length) {\n          e.preventDefault();\n          handleAnswer(options[index].short);\n        }\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isActive, selectedAnswer, options]);\n\n  const availableIntervals = getIntervalsForDifficulty(exercise.difficulty);\n\n  const generateQuestion = useCallback(async () => {\n    await initAudio();\n    \n    // Pick a random interval from available ones\n    const interval = availableIntervals[Math.floor(Math.random() * availableIntervals.length)];\n    \n    // Generate root position (leave room for interval)\n    const maxFret = exercise.difficulty <= 1 ? 7 : 12;\n    const root = getRandomPosition(stringCount, maxFret, 0);\n    \n    // Calculate target position (same string, different fret)\n    const direction: 'ascending' | 'descending' = Math.random() > 0.5 ? 'ascending' : 'descending';\n    const targetFret = direction === 'ascending' \n      ? root.fret + interval.semitones \n      : root.fret - interval.semitones;\n    \n    // If target fret is invalid, flip direction\n    let finalTargetFret = targetFret;\n    let finalDirection: 'ascending' | 'descending' = direction;\n    if (targetFret < 0 || targetFret > 22) {\n      finalDirection = direction === 'ascending' ? 'descending' : 'ascending';\n      finalTargetFret = finalDirection === 'ascending' \n        ? root.fret + interval.semitones \n        : root.fret - interval.semitones;\n    }\n    \n    // If still invalid, just use ascending from a lower fret\n    if (finalTargetFret < 0 || finalTargetFret > 22) {\n      const newRoot = { ...root, fret: Math.min(root.fret, 10) };\n      finalTargetFret = newRoot.fret + interval.semitones;\n      finalDirection = 'ascending';\n      setRootPosition(newRoot);\n    } else {\n      setRootPosition(root);\n    }\n    \n    const target: FretPosition = { string: root.string, fret: finalTargetFret };\n    \n    // Generate wrong options\n    const wrongOptions = availableIntervals\n      .filter(i => i.short !== interval.short)\n      .sort(() => Math.random() - 0.5)\n      .slice(0, 3);\n    \n    const allOptions = [interval, ...wrongOptions].sort(() => Math.random() - 0.5);\n    \n    setTargetPosition(target);\n    setCorrectInterval(interval);\n    setOptions(allOptions);\n    setSelectedAnswer(null);\n    setIsCorrect(null);\n    setShowFeedback(false);\n    setPlayDirection(finalDirection);\n    \n    // Highlight both positions\n    setHighlightedPositions([root, target]);\n    \n    // Play the interval\n    const rootNote = getNoteAtPosition(root, tuning, stringCount);\n    const targetNote = getNoteAtPosition(target, tuning, stringCount);\n    \n    setTimeout(() => {\n      if (finalDirection === 'ascending') {\n        playNote(rootNote, { duration: 0.8, velocity: 0.7 });\n        setTimeout(() => playNote(targetNote, { duration: 0.8, velocity: 0.7 }), 600);\n      } else {\n        playNote(targetNote, { duration: 0.8, velocity: 0.7 });\n        setTimeout(() => playNote(rootNote, { duration: 0.8, velocity: 0.7 }), 600);\n      }\n    }, 300);\n    \n  }, [stringCount, tuning, exercise.difficulty, availableIntervals, setHighlightedPositions]);\n\n  useEffect(() => {\n    if (isActive) {\n      generateQuestion();\n    } else {\n      clearHighlights();\n    }\n    \n    return () => {\n      clearHighlights();\n    };\n  }, [isActive, generateQuestion, clearHighlights]);\n\n  const handlePlayAgain = () => {\n    if (!rootPosition || !targetPosition) return;\n    \n    const rootNote = getNoteAtPosition(rootPosition, tuning, stringCount);\n    const targetNote = getNoteAtPosition(targetPosition, tuning, stringCount);\n    \n    if (playDirection === 'ascending') {\n      playNote(rootNote, { duration: 0.8, velocity: 0.7 });\n      setTimeout(() => playNote(targetNote, { duration: 0.8, velocity: 0.7 }), 600);\n    } else {\n      playNote(targetNote, { duration: 0.8, velocity: 0.7 });\n      setTimeout(() => playNote(rootNote, { duration: 0.8, velocity: 0.7 }), 600);\n    }\n  };\n\n  const handleAnswer = (answer: string) => {\n    if (selectedAnswer !== null || !isActive || !correctInterval) return;\n    \n    setSelectedAnswer(answer);\n    const correct = answer === correctInterval.short;\n    setIsCorrect(correct);\n    setShowFeedback(true);\n    \n    // Record answer using the hook (handles scoring, completion, and progress tracking)\n    recordAnswer(correct);\n    \n    // Play the interval again\n    handlePlayAgain();\n    \n    // Move to next question after delay (hook handles completion check)\n    setTimeout(() => {\n      if (score.total + 1 < 10) {\n        generateQuestion();\n      }\n    }, 2500);\n  };\n\n  if (!isActive) {\n    return (\n      <div className=\"text-center py-8\">\n        <p style={{ color: 'var(--text-secondary)' }} className=\"mb-4\">\n          Click \"Start Exercise\" to begin interval recognition training.\n        </p>\n        <div className=\"flex justify-center gap-4 text-sm\" style={{ color: 'var(--text-muted)' }}>\n          <span>Difficulty: {exercise.difficulty}/5</span>\n          <span>|</span>\n          <span>Intervals: {availableIntervals.map(i => i.short).join(', ')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Score Display */}\n      <div className=\"flex justify-between items-center\">\n        <div className=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>\n          Question {questionNumber} of 10\n        </div>\n        <div className=\"text-sm font-medium\" style={{ color: 'var(--text-primary)' }}>\n          Score: {score.correct}/{score.total}\n          {score.total > 0 && (\n            <span style={{ color: 'var(--text-muted)' }} className=\"ml-2\">\n              ({scorePercentage}%)\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Fretboard */}\n      <div className=\"card p-4\">\n        <Fretboard interactive={false} />\n      </div>\n\n      {/* Question */}\n      <div className=\"text-center\">\n        <p className=\"text-lg font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n          What interval is being played?\n        </p>\n        <div className=\"flex items-center justify-center gap-4\">\n          <p className=\"text-sm\" style={{ color: 'var(--text-muted)' }}>\n            Direction: {playDirection === 'ascending' ? 'â†‘ Ascending' : 'â†“ Descending'}\n          </p>\n          <button\n            onClick={handlePlayAgain}\n            className=\"btn-secondary text-sm flex items-center gap-1\"\n            disabled={selectedAnswer !== null}\n          >\n            ðŸ”Š Play Again\n          </button>\n        </div>\n      </div>\n\n      {/* Answer Options */}\n      <div \n        className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 max-w-2xl mx-auto\"\n        role=\"group\"\n        aria-label=\"Answer options. Press 1, 2, 3, or 4 to select an answer\"\n      >\n        {options.map((option, index) => {\n          let buttonStyle: React.CSSProperties = {\n            padding: '1rem',\n            borderRadius: '0.5rem',\n            fontWeight: 'bold',\n            transition: 'all 0.2s',\n            border: 'none',\n            cursor: selectedAnswer === null ? 'pointer' : 'default',\n          };\n          \n          if (selectedAnswer === null) {\n            buttonStyle.backgroundColor = 'var(--bg-tertiary)';\n            buttonStyle.color = 'var(--text-primary)';\n          } else if (option.short === correctInterval?.short) {\n            buttonStyle.backgroundColor = 'var(--success)';\n            buttonStyle.color = 'white';\n          } else if (option.short === selectedAnswer) {\n            buttonStyle.backgroundColor = 'var(--error)';\n            buttonStyle.color = 'white';\n          } else {\n            buttonStyle.backgroundColor = 'var(--bg-tertiary)';\n            buttonStyle.color = 'var(--text-muted)';\n            buttonStyle.opacity = 0.5;\n          }\n          \n          return (\n            <button\n              key={option.short}\n              onClick={() => handleAnswer(option.short)}\n              disabled={selectedAnswer !== null}\n              style={buttonStyle}\n              className=\"hover:opacity-90 flex flex-col items-center focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500\"\n              aria-label={`Option ${index + 1}: ${option.name}, ${option.semitones} semitones. Press ${index + 1} to select`}\n              aria-pressed={selectedAnswer === option.short}\n            >\n              <span className=\"sr-only\">{index + 1}: </span>\n              <span className=\"text-lg\">{option.short}</span>\n              <span className=\"text-xs opacity-75\">{option.name}</span>\n            </button>\n          );\n        })}\n      </div>\n      {/* Keyboard hint */}\n      <p className=\"text-center text-xs\" style={{ color: 'var(--text-muted)' }}>\n        <span aria-hidden=\"true\">Tip: Press 1, 2, 3, or 4 to quickly select an answer</span>\n        <span className=\"sr-only\">Use number keys 1 through 4 to select answers</span>\n      </p>\n\n      {/* Feedback */}\n      {showFeedback && correctInterval && (\n        <div \n          className=\"text-center p-4 rounded-lg animate-fade-in\"\n          style={{ \n            backgroundColor: isCorrect ? 'rgba(16, 185, 129, 0.1)' : 'rgba(239, 68, 68, 0.1)',\n          }}\n          role=\"alert\"\n          aria-live=\"assertive\"\n        >\n          <p \n            className=\"font-medium text-lg\"\n            style={{ color: isCorrect ? 'var(--success)' : 'var(--error)' }}\n          >\n            <span aria-hidden=\"true\">{isCorrect ? 'âœ“' : 'âœ—'}</span>\n            {isCorrect ? ' Correct!' : ` Incorrect. The answer was ${correctInterval.name}`}\n          </p>\n          <p className=\"text-sm mt-2\" style={{ color: 'var(--text-secondary)' }}>\n            Song reference: {correctInterval.song}\n          </p>\n        </div>\n      )}\n\n      {/* Interval Reference */}\n      <div \n        className=\"p-4 rounded-lg\"\n        style={{ backgroundColor: 'var(--bg-tertiary)' }}\n      >\n        <h4 className=\"font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n          Interval Reference\n        </h4>\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2 text-sm\">\n          {availableIntervals.map(interval => (\n            <div key={interval.short} className=\"flex justify-between\">\n              <span style={{ color: 'var(--text-secondary)' }}>{interval.short}:</span>\n              <span style={{ color: 'var(--text-muted)' }}>{interval.semitones} semitones</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default IntervalRecognitionExercise;\n"],"names":["INTERVALS","getIntervalsForDifficulty","difficulty","i","IntervalRecognitionExercise","exercise","stringCount","tuning","setHighlightedPositions","clearHighlights","useGuitarStore","score","questionNumber","isActive","recordAnswer","scorePercentage","useExercise","rootPosition","setRootPosition","useState","targetPosition","setTargetPosition","correctInterval","setCorrectInterval","options","setOptions","selectedAnswer","setSelectedAnswer","isCorrect","setIsCorrect","showFeedback","setShowFeedback","playDirection","setPlayDirection","useEffect","handleKeyDown","e","keyMap","index","handleAnswer","availableIntervals","generateQuestion","useCallback","initAudio","interval","maxFret","root","getRandomPosition","direction","targetFret","finalTargetFret","finalDirection","newRoot","target","wrongOptions","allOptions","rootNote","getNoteAtPosition","targetNote","playNote","handlePlayAgain","answer","correct","jsxs","jsx","Fretboard","option","buttonStyle"],"mappings":"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"}