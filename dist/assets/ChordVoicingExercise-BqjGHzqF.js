import{u as an,d as ln,r as l,n as Q,i as H,k as cn,h as L,j as s,F as mn}from"./index-JYOpyFy1.js";import{D as dn}from"./DisplayModeToggle-BZoGdttj.js";import"./tone-BDbzsNEa.js";const vn=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],U=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Y={maj7:{name:"Major 7th",inversions:[{name:"Root Position",positions:[[2,0],[3,0],[4,0],[5,2]],intervals:["5","R","3","M7"]},{name:"1st Inversion",positions:[[2,1],[3,1],[4,0],[5,0]],intervals:["M7","3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,2],[4,2],[5,2]],intervals:["R","5","M7","3"]},{name:"3rd Inversion",positions:[[2,1],[3,3],[4,0],[5,2]],intervals:["3","M7","R","5"]}]},min7:{name:"Minor 7th",inversions:[{name:"Root Position",positions:[[2,0],[3,0],[4,-1],[5,1]],intervals:["5","R","b3","b7"]},{name:"1st Inversion",positions:[[2,0],[3,0],[4,0],[5,0]],intervals:["b7","b3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,2],[4,1],[5,1]],intervals:["R","5","b7","b3"]},{name:"3rd Inversion",positions:[[2,0],[3,2],[4,0],[5,2]],intervals:["b3","b7","R","5"]}]},dom7:{name:"Dominant 7th",inversions:[{name:"Root Position",positions:[[2,0],[3,0],[4,0],[5,1]],intervals:["5","R","3","b7"]},{name:"1st Inversion",positions:[[2,0],[3,1],[4,0],[5,0]],intervals:["b7","3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,2],[4,1],[5,2]],intervals:["R","5","b7","3"]},{name:"3rd Inversion",positions:[[2,1],[3,2],[4,0],[5,2]],intervals:["3","b7","R","5"]}]}};function B(t){return[{label:"B-E-A",sevenStringOnly:!0,inversions:t["B-E-A"]},{label:"E-A-D",inversions:t["E-A-D"]},{label:"A-D-G",inversions:t["A-D-G"]},{label:"D-G-B",inversions:t["D-G-B"]},{label:"G-B-E",inversions:t["G-B-E"]}]}const V={major:{name:"Major Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,1],[4,0]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[2,2],[3,0],[4,1]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,0],[4,0]],intervals:["5","R","3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,2],[5,0]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[3,1],[4,0],[5,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,1],[5,0]],intervals:["5","R","3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,1],[3,-1]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[1,2],[2,0],[3,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,0],[3,-1]],intervals:["5","R","3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,1],[2,-1]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[0,2],[1,0],[2,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-1]],intervals:["5","R","3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,1],[2,-1]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[0,2],[1,0],[2,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-1]],intervals:["5","R","3"]}]})},minor:{name:"Minor Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,0],[4,0]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[2,1],[3,0],[4,1]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[2,1],[3,1],[4,0]],intervals:["5","R","b3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,1],[5,0]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[3,1],[4,1],[5,1]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,1],[5,-1]],intervals:["5","R","b3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,0],[3,-1]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[1,1],[2,0],[3,0]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,0],[3,-2]],intervals:["5","R","b3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,0],[2,-1]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,0]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-2]],intervals:["5","R","b3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,0],[2,-1]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,0]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-2]],intervals:["5","R","b3"]}]})},diminished:{name:"Diminished Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,0],[4,-1]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[2,1],[3,-1],[4,1]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,1],[4,0]],intervals:["b5","R","b3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,1],[5,-1]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[3,1],[4,0],[5,1]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,2],[5,0]],intervals:["b5","R","b3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,0],[3,-2]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[1,1],[2,-1],[3,0]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,1],[3,-1]],intervals:["b5","R","b3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,0],[2,-2]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[0,1],[1,-1],[2,0]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,1],[2,-1]],intervals:["b5","R","b3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,0],[2,-2]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[0,1],[1,-1],[2,0]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,1],[2,-1]],intervals:["b5","R","b3"]}]})},augmented:{name:"Augmented Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,1],[4,1]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[2,1],[3,0],[4,0]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,-1],[4,-1]],intervals:["#5","R","3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,2],[5,1]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[3,1],[4,1],[5,0]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,0],[5,-1]],intervals:["#5","R","3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,1],[3,0]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[1,1],[2,0],[3,-1]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,-1],[3,-2]],intervals:["#5","R","3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,1],[2,0]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,-1]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,-1],[2,-2]],intervals:["#5","R","3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,1],[2,0]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,-1]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,-1],[2,-2]],intervals:["#5","R","3"]}]})}},z={6:[40,45,50,55,59,64],7:[35,40,45,50,55,59,64]},pn=["major","minor","diminished","augmented"];function q(t){return pn.includes(t)}function _(t,p){return p!==7||t.sevenStringOnly?0:1}function K(t,p,g,x){const j=p.intervals.indexOf("R"),[a,i]=p.positions[j],d=a+x,o=g[d],I=U.indexOf(Q(t)),r=o%12;let R=((I-r)%12+12)%12-i;const P=Math.min(...p.positions.map(G=>G[1])),A=Math.max(1,-P);for(;R<A;)R+=12;for(;R>14;)R-=12;return R}function un(t,p,g,x,j){const a=new Map;for(const[i,d]of t.positions)a.set(i+g,d);for(let i=0;i<x.length;i++){const d=x[i],o=new Map;for(const[m,R]of d.positions)o.set(m+j,R);const I=[];for(const m of a.keys())o.has(m)&&I.push(m);if(I.length<2)continue;const r=I.map(m=>p+a.get(m)-o.get(m));if(r.every(m=>m===r[0])){const m=r[0];if(d.positions.every(([,P])=>{const A=m+P;return A>=0&&A<=22}))return{inversionIdx:i,rootFret:m}}}return null}function J(t,p,g,x){return t.map(([j,a])=>{const i=j+x,d=p+a,o=g[i]+d,I=U[o%12],r=Math.floor(o/12)-1;return`${I}${r}`})}const hn=({exercise:t})=>{const{setHighlightedPositions:p,setSecondaryHighlightedPositions:g,clearHighlights:x,setRootNote:j,stringCount:a}=an(),i=z[a]||z[6],{isActive:d}=ln(),[o,I]=l.useState("C"),[r,m]=l.useState("maj7"),[R,P]=l.useState(0),[A,G]=l.useState(0),[k,W]=l.useState(!1),[T,X]=l.useState(!0),[E,$]=l.useState(5),O=l.useRef(!1),y=q(r);l.useEffect(()=>{let n="maj7";if(t.id.includes("chord-1")?n="maj7":t.id.includes("chord-2")?n="min7":t.id.includes("chord-3")?n="dom7":t.id.includes("chord-4")?n="major":t.id.includes("chord-5")?n="minor":t.id.includes("chord-6")?n="diminished":t.id.includes("chord-7")&&(n="augmented"),m(n),P(0),q(n)){const u=V[n].stringSets.filter(f=>!f.sevenStringOnly||a===7).findIndex(f=>f.label==="D-G-B");G(u>=0?u:0)}else G(0)},[t.id,a]);const Z=l.useMemo(()=>y?V[r].name:Y[r].name,[r,y]),c=l.useMemo(()=>y?V[r].stringSets.filter(n=>!n.sevenStringOnly||a===7):null,[r,y,a]),h=c?Math.min(A,c.length-1):0,D=l.useMemo(()=>y?!c||c.length===0?[]:c[h]?.inversions||c[0].inversions:Y[r].inversions,[r,y,h,c]),N=Math.min(R,Math.max(0,D.length-1)),v=D[N]||D[0],S=l.useMemo(()=>a!==7||y&&c&&(c[h]||c[0])?.sevenStringOnly?0:1,[a,y,c,h]);l.useEffect(()=>{if(O.current){O.current=!1;return}v&&$(K(o,v,i,S))},[o,r,N,S,v,i]);const nn=n=>{if(n===h||!c)return;let e=N,u=E,f=h;const w=n>f?1:-1;for(;f!==n;){const M=f+w,C=c[f],b=c[M];if(!C||!b)break;const en=_(C,a),tn=_(b,a),on=C.inversions[e]||C.inversions[0],F=un(on,u,en,b.inversions,tn);if(F)e=F.inversionIdx,u=F.rootFret;else{e=Math.min(e,b.inversions.length-1);const rn=b.inversions[e]||b.inversions[0];u=K(o,rn,i,_(b,a))}f=M}O.current=!0,G(n),P(e),$(u)};l.useEffect(()=>{if(!d||!v)return;const n=v.positions.map(([e,u])=>({string:e+S,fret:E+u})).filter(e=>e.fret>=0&&e.fret<=22);if(p(n),j(Q(o)),k){const e=[];D.forEach((u,f)=>{if(f===N)return;const w=K(o,u,i,S);u.positions.forEach(([M,C])=>{const b=w+C;b>=0&&b<=22&&e.push({string:M+S,fret:b})})}),g(e)}else g([])},[d,o,r,N,h,E,S,k,v,D,i,p,g,j]),l.useEffect(()=>{if(!T||!d||!v)return;const n=setTimeout(async()=>{await H(),cn();const e=J(v.positions,E,i,S);L(e,{duration:2,velocity:.6})},50);return()=>clearTimeout(n)},[T,d,o,r,N,h,E,S,v,i]),l.useEffect(()=>()=>{x()},[x]);const sn=async()=>{if(await H(),!v)return;const n=J(v.positions,E,i,S);L(n,{duration:2,velocity:.6})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),s.jsx("div",{className:"flex gap-1.5 flex-wrap",children:vn.map(n=>s.jsx("button",{onClick:()=>I(n),className:`px-2.5 py-1.5 rounded text-sm font-medium transition-all ${o===n?"btn-primary":""}`,style:o!==n?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:n},n))})]}),c&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"String Set"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:c.map((n,e)=>s.jsx("button",{onClick:()=>nn(e),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${h===e?"btn-primary":""}`,style:h!==e?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:n.label},n.label))})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[s.jsxs("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:[o," ",Z," - ",v?.name]}),s.jsxs("div",{className:"flex gap-2 text-sm flex-wrap",style:{color:"var(--text-secondary)"},children:[s.jsx("span",{children:"Intervals:"}),v?.intervals.map((n,e)=>s.jsx("span",{className:"px-2 py-0.5 rounded",style:{backgroundColor:"var(--bg-tertiary)"},children:n},e))]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:["Position: fret ",E]}),s.jsx(dn,{compact:!0})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Inversion"}),s.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",style:{color:"var(--text-secondary)"},children:[s.jsx("input",{type:"checkbox",checked:k,onChange:n=>W(n.target.checked),className:"rounded"}),"Show all inversions"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:D.map((n,e)=>s.jsx("button",{onClick:()=>P(e),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${N===e?"btn-primary":""}`,style:N!==e?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:n.name},e))})]}),s.jsx("div",{className:"card p-4",children:s.jsx(mn,{interactive:!0})}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("button",{onClick:sn,className:"btn-primary flex items-center gap-2",children:"Play Chord"}),s.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",style:{color:"var(--text-secondary)"},children:[s.jsx("input",{type:"checkbox",checked:T,onChange:n=>X(n.target.checked),className:"rounded"}),"Auto-play"]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[s.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--text-primary)"},children:"Practice Tips"}),s.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[s.jsx("li",{children:"Learn all inversions in one position before moving"}),s.jsx("li",{children:"Practice voice leading between inversions"}),y&&s.jsx("li",{children:"Compare the same inversion across different string sets"}),s.jsx("li",{children:"Connect inversions to create smooth chord progressions"}),s.jsx("li",{children:"Identify the root note in each inversion"}),s.jsx("li",{children:"Try playing ii-V-I progressions using these voicings"})]})]})]})};export{hn as default};
