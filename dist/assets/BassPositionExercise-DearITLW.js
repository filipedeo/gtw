import{u as G,c as H,d as R,r as c,n as w,s as F,j as e,F as U,g as T,i as M,f as O,p as Y}from"./index-B3UTKWKW.js";import{M as k,g as q}from"./theoryEngine-BiTKQURU.js";import{D as J}from"./DisplayModeToggle-DIispu4g.js";import{P as L}from"./PracticeRating-BS5RI7Dd.js";import"./tone-BWNjRQgH.js";const Q=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"];function A(b,g,p,j,N){const h=q(w(b),g);if(!h||h.length===0)return[];const S=h.map(s=>w(s)),u=[];let d=N;for(let s=0;s<j;s++){const o=[];for(let n=0;n<=22;n++){const x=T({string:s,fret:n},p),a=w(x.replace(/\d/,""));S.includes(a)&&o.push(n)}let m=[],r=1/0;for(let n=0;n<=o.length-2;n++){const i=[o[n],o[n+1]];if(i[1]-i[0]<=4){const x=(i[0]+i[1])/2,a=Math.abs(x-d-1);a<r&&(r=a,m=i)}}m.length===2&&(m.forEach(n=>u.push({string:s,fret:n})),d=Math.max(d,m[0]))}return u}const $=({exercise:b})=>{const{stringCount:g,tuning:p,setHighlightedPositions:j,setSecondaryHighlightedPositions:N,setRootNote:h,clearHighlights:S}=G(),{droneConfig:u,setDroneConfig:d,isDroneActive:s,setDroneActive:o}=H(),{isActive:m}=R(),[r,n]=c.useState("C"),[i,x]=c.useState(0),[a,I]=c.useState(0),[P,C]=c.useState(!1),f=k[i],D=c.useCallback(()=>{if(!m)return;const t=A(r,f.name,p,g,a);j(t),h(w(r)),N([])},[m,r,f,p,g,a,j,N,h]);c.useEffect(()=>{D()},[D]),c.useEffect(()=>{s&&d({note:r,octave:2})},[r,s,d]),c.useEffect(()=>()=>{S(),s&&(F(),o(!1))},[S,s,o]);const K=async()=>{await M(),s?(F(),o(!1)):(d({note:r,octave:2}),O({note:r,octave:2,volume:u.volume,waveform:u.waveform}),o(!0))},z=async()=>{if(P)return;await M(),C(!0);const y=[...A(r,f.name,p,g,a)].sort((l,v)=>l.string!==v.string?l.string-v.string:l.fret-v.fret),E=.25;for(let l=0;l<y.length;l++){const v=y[l],B=T(v,p);Y(B,{duration:.4,velocity:.7,delay:l*E})}setTimeout(()=>{C(!1)},y.length*E*1e3+500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Mode / Scale"}),e.jsx("select",{value:i,onChange:t=>x(parseInt(t.target.value)),className:"w-full px-3 py-2 rounded-lg",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-color)"},children:k.map((t,y)=>e.jsx("option",{value:y,children:t.displayName},t.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),e.jsx("select",{value:r,onChange:t=>n(t.target.value),className:"w-full px-3 py-2 rounded-lg",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-color)"},children:Q.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:["Starting Fret Position: ",a]}),e.jsx("input",{type:"range",min:0,max:12,value:a,onChange:t=>I(parseInt(t.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs",style:{color:"var(--text-muted)"},children:[e.jsx("span",{children:"Open"}),e.jsx("span",{children:"12th Fret"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[e.jsxs("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:[f.displayName," (",r,") - 2 Notes Per String"]}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Characteristic note: ",e.jsx("strong",{children:f.characteristicNote})," ","â€”"," ","2 notes per string starting near fret ",a,". This creates natural one-finger-per-fret patterns optimized for bass."]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(J,{})}),e.jsx("div",{className:"card p-4",children:e.jsx(U,{interactive:!0})}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("button",{onClick:K,className:s?"btn-danger":"btn-success",children:s?"Stop Drone":"Play Drone"}),e.jsx("button",{onClick:z,disabled:P,className:"btn-secondary disabled:opacity-50",children:P?"Playing...":"Play Scale"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--text-primary)"},children:"Practice Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[e.jsx("li",{children:"2 notes per string creates natural one-finger-per-fret bass patterns"}),e.jsx("li",{children:"Keep your thumb anchored behind the neck for stability"}),e.jsx("li",{children:"Use one finger per fret within each position (index and middle, or index and ring)"}),e.jsx("li",{children:"Practice shifting cleanly between positions -- minimize hand movement"}),e.jsx("li",{children:"Use alternating right-hand fingers (index-middle) for consistent tone"}),e.jsx("li",{children:"Start slow with a metronome and increase speed only when clean"}),e.jsx("li",{children:"Use the drone to hear how each scale degree relates to the tonal center"}),e.jsx("li",{children:"Try playing the pattern ascending, then descending without pausing"})]})]}),e.jsx(L,{exerciseId:b.id,exerciseType:b.type})]})};export{$ as default,A as getTwoNPSPositions};
