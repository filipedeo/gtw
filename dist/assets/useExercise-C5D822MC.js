import{f as q,m as D,r as t}from"./index-DtFSbDgp.js";const k=10;function L(A){const{exerciseId:n,totalQuestions:a=k,onComplete:l}=A,{isActive:o,recordAttempt:p,endExercise:E,startTime:u}=q(),{recordExerciseCompletion:S,updateReviewItem:d}=D(),[e,i]=t.useState({correct:0,total:0}),[f,m]=t.useState(!1),r=t.useRef(!1);t.useEffect(()=>{o&&(i({correct:0,total:0}),m(!1),r.current=!1)},[o]),t.useEffect(()=>()=>{r.current=!1},[]);const w=t.useCallback(x=>{if(!o||f)return;const s={correct:e.correct+(x?1:0),total:e.total+1};if(i(s),p(x),s.total>=a){if(r.current)return;r.current=!0,m(!0);const c=s.correct/s.total,C=u?(Date.now()-u)/1e3:0;S(n,c,C);const g=c>=.8?5:c>=.6?3:1;d(n,g),E({exerciseId:n,score:c,timeSpent:C,attempts:s.total,completedAt:new Date}),l&&l(c)}},[o,f,e,a,u,n,p,S,d,E,l]),T=t.useCallback(()=>{i({correct:0,total:0}),m(!1),r.current=!1},[]),I=e.total>0?Math.round(e.correct/e.total*100):0,R=a-e.total,b=e.total+1;return{score:e,questionNumber:b,isComplete:f,isActive:o,recordAnswer:w,resetExercise:T,scorePercentage:I,questionsRemaining:R}}export{L as u};
//# sourceMappingURL=useExercise-C5D822MC.js.map
