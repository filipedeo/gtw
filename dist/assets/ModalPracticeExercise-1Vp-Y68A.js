import{u as K,c as R,d as F,r as a,n as C,e as y,s as D,j as e,i as I,f as _}from"./index-DxpOD2wF.js";import{M as E,g as B}from"./theoryEngine-DXoQnsEp.js";import{D as G}from"./DisplayModeToggle-LmbD5Efv.js";import{P as O}from"./PracticeRating-DBBjRuYa.js";import"./tone-BDbzsNEa.js";const q={"modal-1":"dorian","modal-2":"mixolydian","modal-3":"lydian","modal-4":"phrygian","modal-5":"aeolian","modal-6":"dorian","modal-7":"locrian","modal-8":"harmonic minor","modal-9":"melodic minor","modal-10":"blues"},W=({exercise:c})=>{const{stringCount:n,tuning:l,setHighlightedPositions:h,setSecondaryHighlightedPositions:u,setRootNote:v,clearHighlights:f}=K(),{droneConfig:b,setDroneConfig:g,isDroneActive:o,setDroneActive:d}=R(),{isActive:j}=F(),[m,N]=a.useState("dorian"),[r,S]=a.useState("A"),[x,w]=a.useState(!0),k=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],t=E.find(s=>s.name===m);a.useEffect(()=>{const s=q[c.id];s&&N(s)},[c.id]),a.useEffect(()=>{if(j)try{const s=C(r),i=B(s,m);if(i&&i.length>0){if(x&&t&&t.characteristicDegree<i.length){const p=i[t.characteristicDegree],P=C(p),A=i.filter((L,H)=>H!==t.characteristicDegree),T=y(A,l,n,12),z=y([P],l,n,12);h(T),u(z)}else{const p=y(i,l,n,12);h(p),u([])}v(s)}}catch(s){console.error("Error getting mode notes:",s)}},[m,r,x,j,n,l,t,h,u,v]),a.useEffect(()=>{o&&g({note:r,octave:2})},[r,o,g]),a.useEffect(()=>()=>{f(),o&&(D(),d(!1))},[f,o,d]);const M=async()=>{await I(),o?(D(),d(!1)):(g({note:r,octave:2}),_({note:r,octave:2,volume:b.volume,waveform:b.waveform}),d(!0))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Mode"}),e.jsx("select",{value:m,onChange:s=>N(s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:E.map(s=>e.jsx("option",{value:s.name,children:s.displayName},s.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),e.jsx("select",{value:r,onChange:s=>S(s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:k.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),t&&e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--accent-primary)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:t.displayName}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Characteristic Note:"})," ",t.characteristicNote]}),e.jsx("p",{className:"text-sm mt-2",style:{color:"var(--text-secondary)"},children:"Focus on emphasizing the characteristic note in your playing. This is what gives the mode its unique sound."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Drone"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Play a ",r," drone to practice over"]})]}),e.jsx("button",{onClick:M,className:"px-6 py-2 rounded-lg font-medium transition-colors text-white",style:{backgroundColor:o?"var(--error)":"var(--success)"},children:o?"Stop Drone":"Start Drone"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:s=>w(s.target.checked),className:"rounded"}),"Highlight characteristic note"]}),e.jsx(G,{})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--warning)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--warning)"},children:"Practice Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[e.jsxs("li",{children:["Start and end your phrases on the root note (",r,")"]}),e.jsxs("li",{children:["Emphasize the characteristic note (",t?.characteristicNote,")"]}),e.jsx("li",{children:"Try playing the scale ascending and descending"}),e.jsx("li",{children:"Create short melodic phrases using the highlighted notes"}),e.jsx("li",{children:"Listen to how the mode sounds against the drone"})]})]}),e.jsx(O,{exerciseId:c.id,exerciseType:c.type})]})};export{W as default};
