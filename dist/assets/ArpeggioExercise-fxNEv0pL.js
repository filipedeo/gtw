import{u as B,c as X,d as J,r as a,n as T,e as $,s as I,j as e,F as V,i as L,f as W,p as Z}from"./index-CWkcNJvv.js";import{c as N}from"./theoryEngine-9EFmMbgm.js";import{D as q}from"./DisplayModeToggle-CFeXEIgS.js";import{P as ee}from"./PracticeRating-BZ6DiIj4.js";import"./tone-BWNjRQgH.js";const se=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],te=[{value:"maj7",label:"Major 7",symbol:"maj7"},{value:"min7",label:"Minor 7",symbol:"m7"},{value:"dom7",label:"Dominant 7",symbol:"7"},{value:"min7b5",label:"Half-Diminished",symbol:"m7b5"},{value:"dim7",label:"Diminished 7",symbol:"dim7"},{value:"aug",label:"Augmented",symbol:"aug"}],oe={"bass-arp-1":"maj7","bass-arp-2":"min7","bass-arp-3":"dom7","bass-arp-4":"min7","guitar-arp-1":"maj7","guitar-arp-2":"min7","guitar-arp-3":"dom7","guitar-arp-4":"dim7","guitar-arp-5":"aug","guitar-arp-6":"min7b5"};function P(o){switch(o){case"maj7":return"maj7";case"min7":return"m7";case"dom7":return"7";case"min7b5":return"m7b5";case"dim7":return"dim7";case"aug":return"aug"}}function re(o){switch(o){case"maj7":return["Root","Major 3rd","Perfect 5th","Major 7th"];case"min7":return["Root","Minor 3rd","Perfect 5th","Minor 7th"];case"dom7":return["Root","Major 3rd","Perfect 5th","Minor 7th"];case"min7b5":return["Root","Minor 3rd","Diminished 5th","Minor 7th"];case"dim7":return["Root","Minor 3rd","Diminished 5th","Diminished 7th"];case"aug":return["Root","Major 3rd","Augmented 5th"]}}const de=({exercise:o})=>{const{instrument:Q,stringCount:g,tuning:u,fretCount:C,setHighlightedPositions:D,setSecondaryHighlightedPositions:S,setRootNote:w,clearHighlights:A}=B(),H=Q==="guitar",{droneConfig:k,setDroneConfig:p,isDroneActive:n,setDroneActive:h}=X(),{isActive:E}=J(),[t,K]=a.useState("C"),[l,M]=a.useState("maj7"),[x,O]=a.useState(!0),[y,b]=a.useState(!1);a.useEffect(()=>{const s=oe[o.id];s&&M(s)},[o.id]);const v=x?C:12;a.useEffect(()=>{if(E)try{const s=P(l),c=`${t}${s}`,i=N(c);if(i&&i.length>0){const F=i.map(j=>T(j)),d=T(t),f=$([d],u,g,v),m=F.filter(j=>j!==d),r=$(m,u,g,v);D(r),S(f),w(d)}}catch(s){console.error("Error computing arpeggio positions:",s)}},[t,l,x,E,g,u,v,C,D,S,w]),a.useEffect(()=>{n&&p({note:t,octave:2})},[t,n,p]),a.useEffect(()=>()=>{A(),n&&(I(),h(!1))},[A,n,h]);const U=async()=>{await L(),n?(I(),h(!1)):(p({note:t,octave:2}),W({note:t,octave:2,volume:k.volume,waveform:k.waveform}),h(!0))},z=async()=>{if(y)return;await L(),b(!0);const s=P(l),c=`${t}${s}`,i=N(c);if(i&&i.length>0){const d=i.map(r=>`${r}2`),f=[...d].reverse().slice(1),m=[...d,...f];for(let r=0;r<m.length;r++)Z(m[r],{duration:.5,velocity:.7,delay:r*.35});setTimeout(()=>{b(!1)},m.length*.35*1e3+500)}else b(!1)},R=P(l),G=`${t}${R}`,Y=N(G),_=re(l);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),e.jsx("select",{value:t,onChange:s=>K(s.target.value),className:"w-full px-3 py-2 rounded-lg",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-color)"},children:se.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Chord Quality"}),e.jsx("select",{value:l,onChange:s=>M(s.target.value),className:"w-full px-3 py-2 rounded-lg",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-color)"},children:te.map(s=>e.jsxs("option",{value:s.value,children:[s.label," (",s.symbol,")"]},s.value))})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[e.jsxs("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:[t,R," Arpeggio"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:Y.map((s,c)=>e.jsxs("div",{className:"flex flex-col items-center px-3 py-2 rounded-lg",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-color)"},children:[e.jsx("span",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:s}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:_[c]||""})]},c))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:s=>O(s.target.checked),className:"rounded"}),"Full fretboard"]}),e.jsx(q,{})]}),e.jsx("div",{className:"card p-4",children:e.jsx(V,{interactive:!0})}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("button",{onClick:U,className:n?"btn-danger":"btn-success",children:n?"Stop Drone":"Play Drone"}),e.jsx("button",{onClick:z,disabled:y,className:"btn-secondary disabled:opacity-50",children:y?"Playing...":"Play Arpeggio"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--text-primary)"},children:"Practice Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[H?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Practice sweep picking â€” use a continuous downstroke across strings ascending, upstroke descending"}),e.jsx("li",{children:"Start slowly with a metronome"}),e.jsx("li",{children:"Mute strings after playing to keep the arpeggio clean"}),e.jsx("li",{children:"Economy of motion: keep your pick close to the strings"}),e.jsx("li",{children:"Learn each inversion: start on the root, 3rd, 5th, and 7th"}),e.jsx("li",{children:"Practice connecting arpeggio shapes across positions on the neck"}),e.jsx("li",{children:"Over a chord progression, switch arpeggios to outline the harmony"})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Play the arpeggio ascending and descending with even tone"}),e.jsx("li",{children:"Use alternating fingers (index-middle) for consistent attack"}),e.jsx("li",{children:"Learn each inversion: start on the root, 3rd, 5th, and 7th"}),e.jsx("li",{children:"Practice connecting arpeggio shapes across positions on the neck"}),e.jsx("li",{children:"Over a chord progression, switch arpeggios to outline the harmony"}),o.id==="bass-arp-4"&&e.jsx("li",{children:"For inversions, start on each chord tone in turn: root position, 1st, 2nd, 3rd inversion"})]}),e.jsx("li",{children:"Use the drone to hear how each arpeggio tone relates to the root"})]})]}),e.jsx(ee,{exerciseId:o.id,exerciseType:o.type})]})};export{de as default};
