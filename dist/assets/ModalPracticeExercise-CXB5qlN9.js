import{u as _,c as B,d as G,r as o,n as S,e as v,s as E,j as e,i as O,f as q}from"./index-CWkcNJvv.js";import{M as w,g as L}from"./theoryEngine-9EFmMbgm.js";import{D as X}from"./DisplayModeToggle-CFeXEIgS.js";import{P as J}from"./PracticeRating-BZ6DiIj4.js";import"./tone-BWNjRQgH.js";const Q={"modal-ionian":"ionian","modal-1":"dorian","modal-2":"mixolydian","modal-3":"lydian","modal-4":"phrygian","modal-5":"aeolian","modal-6":"dorian","modal-7":"locrian","modal-8":"harmonic minor","modal-9":"melodic minor","modal-10":"blues"},ee=({exercise:c})=>{const{stringCount:n,tuning:l,fretCount:k,setHighlightedPositions:u,setSecondaryHighlightedPositions:g,setRootNote:b,clearHighlights:j}=_(),{droneConfig:N,setDroneConfig:x,isDroneActive:a,setDroneActive:d}=B(),{isActive:C}=G(),[m,D]=o.useState("dorian"),[t,M]=o.useState("A"),[p,P]=o.useState(!0),[y,A]=o.useState(!1),F=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],r=w.find(s=>s.name===m);o.useEffect(()=>{const s=Q[c.id];s&&D(s)},[c.id]);const h=y?k:12;o.useEffect(()=>{if(C)try{const s=S(t),i=L(s,m);if(i&&i.length>0){if(p&&r&&r.characteristicDegree<i.length){const f=i[r.characteristicDegree],z=S(f),H=i.filter((U,I)=>I!==r.characteristicDegree),K=v(H,l,n,h),R=v([z],l,n,h);u(K),g(R)}else{const f=v(i,l,n,h);u(f),g([])}b(s)}}catch(s){console.error("Error getting mode notes:",s)}},[m,t,p,y,C,n,l,r,h,u,g,b]),o.useEffect(()=>{a&&x({note:t,octave:2})},[t,a,x]),o.useEffect(()=>()=>{j(),a&&(E(),d(!1))},[j,a,d]);const T=async()=>{await O(),a?(E(),d(!1)):(x({note:t,octave:2}),q({note:t,octave:2,volume:N.volume,waveform:N.waveform}),d(!0))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Mode"}),e.jsx("select",{value:m,onChange:s=>D(s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:w.map(s=>e.jsx("option",{value:s.name,children:s.displayName},s.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),e.jsx("select",{value:t,onChange:s=>M(s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:F.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),r&&e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--accent-primary)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:r.displayName}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Characteristic Note:"})," ",r.characteristicNote]}),e.jsx("p",{className:"text-sm mt-2",style:{color:"var(--text-secondary)"},children:"Focus on emphasizing the characteristic note in your playing. This is what gives the mode its unique sound."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Drone"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Play a ",t," drone to practice over"]})]}),e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg font-medium transition-colors text-white",style:{backgroundColor:a?"var(--error)":"var(--success)"},children:a?"Stop Drone":"Start Drone"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("input",{type:"checkbox",checked:p,onChange:s=>P(s.target.checked),className:"rounded"}),"Highlight characteristic note"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("input",{type:"checkbox",checked:y,onChange:s=>A(s.target.checked),className:"rounded"}),"Full fretboard"]}),e.jsx(X,{})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--warning)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--warning)"},children:"Practice Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[e.jsxs("li",{children:["Start and end your phrases on the root note (",t,")"]}),e.jsxs("li",{children:["Emphasize the characteristic note (",r?.characteristicNote,")"]}),e.jsx("li",{children:"Try playing the scale ascending and descending"}),e.jsx("li",{children:"Create short melodic phrases using the highlighted notes"}),e.jsx("li",{children:"Listen to how the mode sounds against the drone"})]})]}),e.jsx(J,{exerciseId:c.id,exerciseType:c.type})]})};export{ee as default};
