import{u as _,c as B,d as G,r as a,n as S,e as v,s as E,j as e,i as O,f as $}from"./index-Cd-TD0Y0.js";import{M as w,g as q}from"./theoryEngine-Ch-vsf_-.js";import{D as L}from"./DisplayModeToggle-BMJjXv4w.js";import{P as X}from"./PracticeRating-DUHWOKm9.js";import"./tone-BWNjRQgH.js";const J={"modal-ionian":"ionian","modal-1":"dorian","modal-2":"mixolydian","modal-3":"lydian","modal-4":"phrygian","modal-5":"aeolian","modal-6":"dorian","modal-7":"locrian","modal-8":"harmonic minor","modal-9":"melodic minor","modal-10":"blues"},ee=({exercise:c})=>{const{stringCount:l,tuning:d,fretCount:k,setHighlightedPositions:x,setSecondaryHighlightedPositions:u,setRootNote:b,clearHighlights:N}=_(),{droneConfig:j,setDroneConfig:g,isDroneActive:o,setDroneActive:m}=B(),{isActive:C}=G(),[n,D]=a.useState("dorian"),[s,M]=a.useState("A"),[p,P]=a.useState(!0),[y,A]=a.useState(!1),F=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],r=w.find(t=>t.name===n);a.useEffect(()=>{const t=J[c.id];t&&D(t)},[c.id]);const h=y?k:12;a.useEffect(()=>{if(C)try{const t=S(s),i=q(t,n);if(i&&i.length>0){if(p&&r&&r.characteristicDegree<i.length){const f=i[r.characteristicDegree],z=S(f),H=i.filter((Q,I)=>I!==r.characteristicDegree),K=v(H,d,l,h),R=v([z],d,l,h);x(K),u(R)}else{const f=v(i,d,l,h);x(f),u([])}b(t)}}catch(t){console.error("Error getting mode notes:",t)}},[n,s,p,y,C,l,d,r,h,x,u,b]),a.useEffect(()=>{o&&g({note:s,octave:2})},[s,o,g]),a.useEffect(()=>()=>{N(),o&&(E(),m(!1))},[N,o,m]);const T=async()=>{await O(),o?(E(),m(!1)):(g({note:s,octave:2}),$({note:s,octave:2,volume:j.volume,waveform:j.waveform}),m(!0))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Mode"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(t=>e.jsx("button",{onClick:()=>D(t.name),className:`px-3 py-2 rounded-lg font-medium transition-all text-sm ${n===t.name?"btn-primary":""}`,style:n!==t.name?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:t.displayName},t.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:F.map(t=>e.jsx("button",{onClick:()=>M(t),className:`px-3 py-2 rounded-lg font-medium transition-all min-w-[44px] ${s===t?"btn-primary":""}`,style:s!==t?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:t},t))})]}),r&&e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--accent-primary)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:r.displayName}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Characteristic Note:"})," ",r.characteristicNote]}),e.jsx("p",{className:"text-sm mt-2",style:{color:"var(--text-secondary)"},children:"Focus on emphasizing the characteristic note in your playing. This is what gives the mode its unique sound."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Drone"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Play a ",s," drone to practice over"]})]}),e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg font-medium transition-colors text-white",style:{backgroundColor:o?"var(--error)":"var(--success)"},children:o?"Stop Drone":"Start Drone"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("input",{type:"checkbox",checked:p,onChange:t=>P(t.target.checked),className:"rounded"}),"Highlight characteristic note"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("input",{type:"checkbox",checked:y,onChange:t=>A(t.target.checked),className:"rounded"}),"Full fretboard"]}),e.jsx(L,{})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--warning)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--warning)"},children:"Practice Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[e.jsxs("li",{children:["Start and end your phrases on the root note (",s,")"]}),e.jsxs("li",{children:["Emphasize the characteristic note (",r?.characteristicNote,")"]}),e.jsx("li",{children:"Try playing the scale ascending and descending"}),e.jsx("li",{children:"Create short melodic phrases using the highlighted notes"}),e.jsx("li",{children:"Listen to how the mode sounds against the drone"})]})]}),e.jsx(X,{exerciseId:c.id,exerciseType:c.type})]})};export{ee as default};
