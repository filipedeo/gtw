import{t as b,v as S,w as l,x as g,y as v,z as A,A as z,B}from"./index-CwJpEdkT.js";var L=_((t,o)=>[t[0]-o[0],t[1]-o[1]]);function _(t){return(o,r)=>{const n=b(o).coord,e=b(r).coord;if(n&&e){const s=t(n,e);return S(s).name}}}var D={empty:!0,name:"",symbol:"",root:"",bass:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function w(t){const[o,r,n,e]=A(t);return o===""?N("",t):o==="A"&&e==="ug"?N("","aug"):N(o+r,n+e)}function N(t,o){const r=o.split("/");if(r.length===1)return[t,r[0],""];const[n,e,s,u]=A(r[1]);return n!==""&&s===""&&u===""?[t,r[0],n+e]:[t,o,""]}function G(t){if(Array.isArray(t))return h(t[1]||"",t[0],t[2]);if(t==="")return D;{const[o,r,n]=w(t),e=h(r,o,n);return e.empty?h(t):e}}function h(t,o,r){const n=z(t),e=l(o||""),s=l(r||"");if(n.empty||o&&e.empty||r&&s.empty)return D;const u=g(e.pc,s.pc),m=n.intervals.indexOf(u),p=m>=0,d=p?s:l(""),f=m===-1?NaN:m+1,y=s.pc&&s.pc!==e.pc,c=Array.from(n.intervals);if(p)for(let i=1;i<f;i++){const I=c[0][0],O=c[0][1],C=parseInt(I,10)+7;c.push(`${C}${O}`),c.shift()}else if(y){const i=L(g(e.pc,s.pc),"8P");i&&c.unshift(i)}const x=e.empty?[]:c.map(i=>v(e.pc,i));t=n.aliases.indexOf(t)!==-1?t:n.aliases[0];const $=`${e.empty?"":e.pc}${t}${p&&f>1?"/"+d.pc:y?"/"+s.pc:""}`,E=`${o?e.pc+" ":""}${n.name}${p&&f>1?" over "+d.pc:y?" over "+s.pc:""}`;return{...n,name:E,symbol:$,tonic:e.pc,type:n.name,root:d.pc,bass:y?s.pc:"",intervals:c,rootDegree:f,notes:x}}var k={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function F(t){if(typeof t!="string")return["",""];const o=t.indexOf(" "),r=l(t.substring(0,o));if(r.empty){const e=l(t);return e.empty?["",t.toLowerCase()]:[e.name,""]}const n=t.substring(r.name.length+1).toLowerCase();return[r.name,n.length?n:""]}function M(t){const o=Array.isArray(t)?t:F(t),r=l(o[0]).name,n=B(o[1]);if(n.empty)return k;const e=n.name,s=r?n.intervals.map(m=>v(r,m)):[],u=r?r+" "+e:e;return{...n,name:u,type:e,tonic:r,notes:s}}function j(t,o){return M(`${t} ${o}`).notes}const H=[{name:"ionian",displayName:"Ionian (Major)",characteristicNote:"M7",characteristicDegree:6},{name:"dorian",displayName:"Dorian",characteristicNote:"6",characteristicDegree:5},{name:"phrygian",displayName:"Phrygian",characteristicNote:"b2",characteristicDegree:1},{name:"lydian",displayName:"Lydian",characteristicNote:"#4",characteristicDegree:3},{name:"mixolydian",displayName:"Mixolydian",characteristicNote:"b7",characteristicDegree:6},{name:"aeolian",displayName:"Aeolian (Natural Minor)",characteristicNote:"b6",characteristicDegree:5},{name:"locrian",displayName:"Locrian",characteristicNote:"b5",characteristicDegree:4},{name:"harmonic minor",displayName:"Harmonic Minor",characteristicNote:"M7",characteristicDegree:6},{name:"melodic minor",displayName:"Melodic Minor (Ascending)",characteristicNote:"M6 & M7",characteristicDegree:5},{name:"blues",displayName:"Blues",characteristicNote:"b5 (blue note)",characteristicDegree:3}];function J(t,o){return M(`${t} ${o}`).notes}function U(t){return G(t).notes}const a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],R=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],T={1:[0,4,7],2:[0,3,7],3:[0,3,7],4:[0,4,7],5:[0,4,7],6:[0,3,7],7:[0,3,6]},P=[0,0,2,4,5,7,9,11];function V(t,o){const r=a.indexOf(t)!==-1?a.indexOf(t):R.indexOf(t);return o.map(n=>{if(typeof n=="number"){const e=P[n],s=(r+e)%12;return{root:a[s],intervals:T[n]}}if(n==="b7"){const e=(r+10)%12;return{root:a[e],intervals:[0,4,7]}}if(n==="4m"){const e=(r+5)%12;return{root:a[e],intervals:[0,3,7]}}if(n==="5M"){const e=(r+7)%12;return{root:a[e],intervals:[0,4,7]}}return n==="1m"?{root:a[r],intervals:[0,3,7]}:{root:a[r],intervals:[0,4,7]}})}export{H as M,a as N,j as a,V as b,U as c,J as g};
