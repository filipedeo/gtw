import{u as sn,d as en,r as m,n as z,j as n,F as tn,i as on,h as rn}from"./index-C0VeEZru.js";import{D as an}from"./DisplayModeToggle-BgkwggjE.js";import"./tone-BDbzsNEa.js";const ln=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],q=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],H={maj7:{name:"Major 7th",inversions:[{name:"Root Position",positions:[[2,0],[3,0],[4,0],[5,2]],intervals:["5","R","3","M7"]},{name:"1st Inversion",positions:[[2,1],[3,1],[4,0],[5,0]],intervals:["M7","3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,2],[4,2],[5,2]],intervals:["R","5","M7","3"]},{name:"3rd Inversion",positions:[[2,1],[3,3],[4,0],[5,2]],intervals:["3","M7","R","5"]}]},min7:{name:"Minor 7th",inversions:[{name:"Root Position",positions:[[2,0],[3,0],[4,-1],[5,1]],intervals:["5","R","b3","b7"]},{name:"1st Inversion",positions:[[2,0],[3,0],[4,0],[5,0]],intervals:["b7","b3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,2],[4,1],[5,1]],intervals:["R","5","b7","b3"]},{name:"3rd Inversion",positions:[[2,0],[3,2],[4,0],[5,2]],intervals:["b3","b7","R","5"]}]},dom7:{name:"Dominant 7th",inversions:[{name:"Root Position",positions:[[2,0],[3,0],[4,0],[5,1]],intervals:["5","R","3","b7"]},{name:"1st Inversion",positions:[[2,0],[3,1],[4,0],[5,0]],intervals:["b7","3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,2],[4,1],[5,2]],intervals:["R","5","b7","3"]},{name:"3rd Inversion",positions:[[2,1],[3,2],[4,0],[5,2]],intervals:["3","b7","R","5"]}]}};function B(i){return[{label:"B-E-A",sevenStringOnly:!0,inversions:i["B-E-A"]},{label:"E-A-D",inversions:i["E-A-D"]},{label:"A-D-G",inversions:i["A-D-G"]},{label:"D-G-B",inversions:i["D-G-B"]},{label:"G-B-E",inversions:i["G-B-E"]}]}const w={major:{name:"Major Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,1],[4,0]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[2,2],[3,0],[4,1]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,0],[4,0]],intervals:["5","R","3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,2],[5,0]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[3,1],[4,0],[5,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,1],[5,0]],intervals:["5","R","3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,1],[3,-1]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[1,2],[2,0],[3,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,0],[3,-1]],intervals:["5","R","3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,1],[2,-1]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[0,2],[1,0],[2,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-1]],intervals:["5","R","3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,1],[2,-1]],intervals:["R","3","5"]},{name:"1st Inversion",positions:[[0,2],[1,0],[2,0]],intervals:["3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-1]],intervals:["5","R","3"]}]})},minor:{name:"Minor Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,0],[4,0]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[2,1],[3,0],[4,1]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[2,1],[3,1],[4,0]],intervals:["5","R","b3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,1],[5,0]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[3,1],[4,1],[5,1]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,1],[5,-1]],intervals:["5","R","b3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,0],[3,-1]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[1,1],[2,0],[3,0]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,0],[3,-2]],intervals:["5","R","b3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,0],[2,-1]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,0]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-2]],intervals:["5","R","b3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,0],[2,-1]],intervals:["R","b3","5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,0]],intervals:["b3","5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,0],[2,-2]],intervals:["5","R","b3"]}]})},diminished:{name:"Diminished Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,0],[4,-1]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[2,1],[3,-1],[4,1]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,1],[4,0]],intervals:["b5","R","b3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,1],[5,-1]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[3,1],[4,0],[5,1]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,2],[5,0]],intervals:["b5","R","b3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,0],[3,-2]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[1,1],[2,-1],[3,0]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,1],[3,-1]],intervals:["b5","R","b3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,0],[2,-2]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[0,1],[1,-1],[2,0]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,1],[2,-1]],intervals:["b5","R","b3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,0],[2,-2]],intervals:["R","b3","b5"]},{name:"1st Inversion",positions:[[0,1],[1,-1],[2,0]],intervals:["b3","b5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,1],[2,-1]],intervals:["b5","R","b3"]}]})},augmented:{name:"Augmented Triad",stringSets:B({"D-G-B":[{name:"Root Position",positions:[[2,2],[3,1],[4,1]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[2,1],[3,0],[4,0]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[2,0],[3,-1],[4,-1]],intervals:["#5","R","3"]}],"G-B-E":[{name:"Root Position",positions:[[3,2],[4,2],[5,1]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[3,1],[4,1],[5,0]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[3,0],[4,0],[5,-1]],intervals:["#5","R","3"]}],"A-D-G":[{name:"Root Position",positions:[[1,2],[2,1],[3,0]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[1,1],[2,0],[3,-1]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[1,0],[2,-1],[3,-2]],intervals:["#5","R","3"]}],"E-A-D":[{name:"Root Position",positions:[[0,2],[1,1],[2,0]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,-1]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,-1],[2,-2]],intervals:["#5","R","3"]}],"B-E-A":[{name:"Root Position",positions:[[0,2],[1,1],[2,0]],intervals:["R","3","#5"]},{name:"1st Inversion",positions:[[0,1],[1,0],[2,-1]],intervals:["3","#5","R"]},{name:"2nd Inversion",positions:[[0,0],[1,-1],[2,-2]],intervals:["#5","R","3"]}]})}},L={6:[40,45,50,55,59,64],7:[35,40,45,50,55,59,64]},cn=["major","minor","diminished","augmented"];function Y(i){return cn.includes(i)}function V(i,d){return d!==7||i.sevenStringOnly?0:1}function _(i,d,h,x){const S=d.intervals.indexOf("R"),[t,a]=d.positions[S],v=t+x,o=h[v],g=q.indexOf(z(i)),r=o%12;let b=((g-r)%12+12)%12-a;const j=Math.min(...d.positions.map(C=>C[1])),P=Math.max(1,-j);for(;b<P;)b+=12;for(;b>14;)b-=12;return b}function mn(i,d,h,x,S){const t=new Map;for(const[a,v]of i.positions)t.set(a+h,v);for(let a=0;a<x.length;a++){const v=x[a],o=new Map;for(const[c,b]of v.positions)o.set(c+S,b);const g=[];for(const c of t.keys())o.has(c)&&g.push(c);if(g.length<2)continue;const r=g.map(c=>d+t.get(c)-o.get(c));if(r.every(c=>c===r[0])){const c=r[0];if(v.positions.every(([,j])=>{const P=c+j;return P>=0&&P<=22}))return{inversionIdx:a,rootFret:c}}}return null}function dn(i,d,h,x){return i.map(([S,t])=>{const a=S+x,v=d+t,o=h[a]+v,g=q[o%12],r=Math.floor(o/12)-1;return`${g}${r}`})}const un=({exercise:i})=>{const{setHighlightedPositions:d,setSecondaryHighlightedPositions:h,clearHighlights:x,setRootNote:S,stringCount:t}=sn(),a=L[t]||L[6],{isActive:v}=en(),[o,g]=m.useState("C"),[r,c]=m.useState("maj7"),[b,j]=m.useState(0),[P,C]=m.useState(0),[O,J]=m.useState(!1),[G,K]=m.useState(5),T=m.useRef(!1),I=Y(r);m.useEffect(()=>{let s="maj7";if(i.id.includes("chord-1")?s="maj7":i.id.includes("chord-2")?s="min7":i.id.includes("chord-3")?s="dom7":i.id.includes("chord-4")?s="major":i.id.includes("chord-5")?s="minor":i.id.includes("chord-6")?s="diminished":i.id.includes("chord-7")&&(s="augmented"),c(s),j(0),Y(s)){const p=w[s].stringSets.filter(f=>!f.sevenStringOnly||t===7).findIndex(f=>f.label==="D-G-B");C(p>=0?p:0)}else C(0)},[i.id,t]);const $=m.useMemo(()=>I?w[r].name:H[r].name,[r,I]),l=m.useMemo(()=>I?w[r].stringSets.filter(s=>!s.sevenStringOnly||t===7):null,[r,I,t]),y=l?Math.min(P,l.length-1):0,D=m.useMemo(()=>I?!l||l.length===0?[]:l[y]?.inversions||l[0].inversions:H[r].inversions,[r,I,y,l]),N=Math.min(b,Math.max(0,D.length-1)),R=D[N]||D[0],E=m.useMemo(()=>t!==7||I&&l&&(l[y]||l[0])?.sevenStringOnly?0:1,[t,I,l,y]);m.useEffect(()=>{if(T.current){T.current=!1;return}R&&K(_(o,R,a,E))},[o,r,N,E,R,a]);const Q=s=>{if(s===y||!l)return;let e=N,p=G,f=y;const k=s>f?1:-1;for(;f!==s;){const M=f+k,A=l[f],u=l[M];if(!A||!u)break;const W=V(A,t),X=V(u,t),Z=A.inversions[e]||A.inversions[0],F=mn(Z,p,W,u.inversions,X);if(F)e=F.inversionIdx,p=F.rootFret;else{e=Math.min(e,u.inversions.length-1);const nn=u.inversions[e]||u.inversions[0];p=_(o,nn,a,V(u,t))}f=M}T.current=!0,C(s),j(e),K(p)};m.useEffect(()=>{if(!v||!R)return;const s=R.positions.map(([e,p])=>({string:e+E,fret:G+p})).filter(e=>e.fret>=0&&e.fret<=22);if(d(s),S(z(o)),O){const e=[];D.forEach((p,f)=>{if(f===N)return;const k=_(o,p,a,E);p.positions.forEach(([M,A])=>{const u=k+A;u>=0&&u<=22&&e.push({string:M+E,fret:u})})}),h(e)}else h([])},[v,o,r,N,y,G,E,O,R,D,a,d,h,S]),m.useEffect(()=>()=>{x()},[x]);const U=async()=>{if(await on(),!R)return;const s=dn(R.positions,G,a,E);rn(s,{duration:2,velocity:.6})};return v?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),n.jsx("div",{className:"flex gap-1.5 flex-wrap",children:ln.map(s=>n.jsx("button",{onClick:()=>g(s),className:`px-2.5 py-1.5 rounded text-sm font-medium transition-all ${o===s?"btn-primary":""}`,style:o!==s?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:s},s))})]}),l&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"String Set"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:l.map((s,e)=>n.jsx("button",{onClick:()=>Q(e),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${y===e?"btn-primary":""}`,style:y!==e?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:s.label},s.label))})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[n.jsxs("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:[o," ",$," - ",R?.name]}),n.jsxs("div",{className:"flex gap-2 text-sm flex-wrap",style:{color:"var(--text-secondary)"},children:[n.jsx("span",{children:"Intervals:"}),R?.intervals.map((s,e)=>n.jsx("span",{className:"px-2 py-0.5 rounded",style:{backgroundColor:"var(--bg-tertiary)"},children:s},e))]}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:["Position: fret ",G]}),n.jsx(an,{compact:!0})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Inversion"}),n.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",style:{color:"var(--text-secondary)"},children:[n.jsx("input",{type:"checkbox",checked:O,onChange:s=>J(s.target.checked),className:"rounded"}),"Show all inversions"]})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:D.map((s,e)=>n.jsx("button",{onClick:()=>j(e),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${N===e?"btn-primary":""}`,style:N!==e?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:s.name},e))})]}),n.jsx("div",{className:"card p-4",children:n.jsx(tn,{interactive:!0})}),n.jsx("div",{className:"flex gap-3",children:n.jsx("button",{onClick:U,className:"btn-primary flex items-center gap-2",children:"Play Chord"})}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[n.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--text-primary)"},children:"Practice Tips"}),n.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[n.jsx("li",{children:"Learn all inversions in one position before moving"}),n.jsx("li",{children:"Practice voice leading between inversions"}),I&&n.jsx("li",{children:"Compare the same inversion across different string sets"}),n.jsx("li",{children:"Connect inversions to create smooth chord progressions"}),n.jsx("li",{children:"Identify the root note in each inversion"}),n.jsx("li",{children:"Try playing ii-V-I progressions using these voicings"})]})]})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsxs("p",{style:{color:"var(--text-secondary)"},className:"mb-4",children:['Click "Start Exercise" to explore ',$," voicings."]}),n.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Learn Drop 2 voicings and triad inversions across the fretboard."})]})};export{un as default};
