{"version":3,"file":"CAGEDExercise-DhYTml_2.js","sources":["../../src/components/CAGEDExercise.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Exercise } from '../types/exercise';\nimport { FretPosition } from '../types/guitar';\nimport { useGuitarStore } from '../stores/guitarStore';\nimport { useAudioStore } from '../stores/audioStore';\nimport { useExerciseStore } from '../stores/exerciseStore';\nimport { startDrone, stopDrone, playChord, initAudio } from '../lib/audioEngine';\nimport Fretboard from './Fretboard';\n\ninterface CAGEDExerciseProps {\n  exercise: Exercise;\n}\n\n// TODO: Add triad exercises to further explore the CAGED method\n// - Major triads in each CAGED position\n// - Minor triads in each CAGED position  \n// - Diminished and augmented triads\n// - Triad inversions across the fretboard\n// - Connecting triads between CAGED positions\n// This will be handled in a future session.\n\n// CAGED shape definitions - ALL positions are relative offsets from the barre/root position\n// This allows proper transposition to any key\n// \n// String indices use the tuning array convention:\n// - 6-string: 0=low E, 1=A, 2=D, 3=G, 4=B, 5=high E\n// - 7-string: 0=low B, 1=low E, 2=A, 3=D, 4=G, 5=B, 6=high E\n//\n// The fretboard displays with high E at top, low E at bottom.\n// The Fretboard component handles the visual transformation.\nconst CAGED_SHAPES: Record<string, {\n  name: string;\n  description: string;\n  chordPositions: { string: number; fretOffset: number }[]; // Relative to barre position\n  rootString: number; // Which string has the root note (tuning array index)\n  baseKey: string; // The key this shape is based on (for calculating transposition)\n  scalePattern: number[][]; // [string (tuning index), fret offset from barre position]\n}> = {\n  'C': {\n    name: 'C Shape',\n    description: 'Based on the open C chord. Root on the 5th (A) string. Requires a stretch when barred.',\n    rootString: 1, // A string (tuning index 1)\n    baseKey: 'C',\n    // Open C chord: x-3-2-0-1-0 (A string root at fret 3)\n    // String indices: 0=lowE, 1=A, 2=D, 3=G, 4=B, 5=highE\n    chordPositions: [\n      { string: 1, fretOffset: 0 },  // A string - Root C (fret 3 in open position)\n      { string: 2, fretOffset: -1 }, // D string - E (fret 2)\n      { string: 3, fretOffset: -3 }, // G string - G (open = fret 0)\n      { string: 4, fretOffset: -2 }, // B string - C (fret 1)\n      { string: 5, fretOffset: -3 }, // high E - E (open = fret 0)\n    ],\n    scalePattern: [\n      [0, -3], [0, -1], [1, -3], [1, -1], [1, 0],\n      [2, -3], [2, -1], [3, -3], [3, -2], [3, 0],\n      [4, -3], [4, -2], [4, 0], [5, -3], [5, -1], [5, 0]\n    ]\n  },\n  'A': {\n    name: 'A Shape',\n    description: 'Based on the open A chord. Root on the 5th (A) string. Most common barre shape.',\n    rootString: 1, // A string (tuning index 1)\n    baseKey: 'A',\n    // Open A chord: x-0-2-2-2-0 (A string root at fret 0/open)\n    chordPositions: [\n      { string: 1, fretOffset: 0 }, // A string - Root A (open)\n      { string: 2, fretOffset: 2 }, // D string - E (fret 2)\n      { string: 3, fretOffset: 2 }, // G string - A (fret 2)\n      { string: 4, fretOffset: 2 }, // B string - C# (fret 2)\n      { string: 5, fretOffset: 0 }, // high E - E (open)\n    ],\n    scalePattern: [\n      [0, 0], [0, 2], [1, 0], [1, 2], [1, 4],\n      [2, 1], [2, 2], [2, 4], [3, 1], [3, 2], [3, 4],\n      [4, 2], [4, 4], [5, 0], [5, 2], [5, 4]\n    ]\n  },\n  'G': {\n    name: 'G Shape',\n    description: 'Based on the open G chord. Root on the 6th (low E) string. Requires stretching.',\n    rootString: 0, // Low E string (tuning index 0)\n    baseKey: 'G',\n    // Open G chord: 3-2-0-0-0-3 (low E root at fret 3)\n    chordPositions: [\n      { string: 0, fretOffset: 0 },  // low E - Root G (fret 3)\n      { string: 1, fretOffset: -1 }, // A string - B (fret 2)\n      { string: 2, fretOffset: -3 }, // D string - D (open)\n      { string: 3, fretOffset: -3 }, // G string - G (open)\n      { string: 4, fretOffset: -3 }, // B string - B (open)\n      { string: 5, fretOffset: 0 },  // high E - G (fret 3)\n    ],\n    scalePattern: [\n      [0, -3], [0, -1], [0, 0], [1, -3], [1, -1],\n      [2, -3], [2, -1], [2, 1], [3, -3], [3, -1],\n      [4, -3], [4, -1], [4, 0], [5, -3], [5, -1], [5, 0]\n    ]\n  },\n  'E': {\n    name: 'E Shape',\n    description: 'Based on the open E chord. Root on the 6th (low E) string. The most common barre chord.',\n    rootString: 0, // Low E string (tuning index 0)\n    baseKey: 'E',\n    // Open E chord: 0-2-2-1-0-0 (low E root at fret 0/open)\n    chordPositions: [\n      { string: 0, fretOffset: 0 }, // low E - Root E (open)\n      { string: 1, fretOffset: 2 }, // A string - B (fret 2)\n      { string: 2, fretOffset: 2 }, // D string - E (fret 2)\n      { string: 3, fretOffset: 1 }, // G string - G# (fret 1)\n      { string: 4, fretOffset: 0 }, // B string - B (open)\n      { string: 5, fretOffset: 0 }, // high E - E (open)\n    ],\n    scalePattern: [\n      [0, 0], [0, 2], [0, 4], [1, 0], [1, 2], [1, 4],\n      [2, 1], [2, 2], [2, 4], [3, 1], [3, 2], [3, 4],\n      [4, 0], [4, 2], [4, 4], [5, 0], [5, 2], [5, 4]\n    ]\n  },\n  'D': {\n    name: 'D Shape',\n    description: 'Based on the open D chord. Root on the 4th (D) string. Great for higher voicings.',\n    rootString: 2, // D string (tuning index 2)\n    baseKey: 'D',\n    // Open D chord: x-x-0-2-3-2 (D string root at fret 0/open)\n    chordPositions: [\n      { string: 2, fretOffset: 0 }, // D string - Root D (open)\n      { string: 3, fretOffset: 2 }, // G string - A (fret 2)\n      { string: 4, fretOffset: 3 }, // B string - D (fret 3)\n      { string: 5, fretOffset: 2 }, // high E - F# (fret 2)\n    ],\n    scalePattern: [\n      [1, 0], [1, 2], [1, 3], [2, 0], [2, 2],\n      [3, 0], [3, 2], [3, 3], [4, 0], [4, 2], [4, 3],\n      [5, 0], [5, 2], [5, 3]\n    ]\n  }\n};\n\nconst KEYS = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n\nconst CAGEDExercise: React.FC<CAGEDExerciseProps> = ({ exercise }) => {\n  const { stringCount, setHighlightedPositions, setRootNote, clearHighlights } = useGuitarStore();\n  const { droneConfig, setDroneConfig, isDroneActive, setDroneActive } = useAudioStore();\n  const { isActive } = useExerciseStore();\n  \n  // For 7-string guitars, we need to offset string indices by 1\n  // because the CAGED shapes are defined for 6-string (0=low E)\n  // but on 7-string, 0=low B and 1=low E\n  const stringOffset = stringCount === 7 ? 1 : 0;\n  \n  const [selectedShape, setSelectedShape] = useState<string>('C');\n  const [selectedKey, setSelectedKey] = useState<string>('C');\n  const [showChord, setShowChord] = useState(true);\n  const [showScale, setShowScale] = useState(false);\n  const [showRoots, setShowRoots] = useState(true);\n\n  // Get the shape based on exercise ID\n  useEffect(() => {\n    if (exercise.id.includes('caged-1')) setSelectedShape('C');\n    else if (exercise.id.includes('caged-2')) setSelectedShape('A');\n    else if (exercise.id.includes('caged-3')) setSelectedShape('G');\n    else if (exercise.id.includes('caged-4')) setSelectedShape('E');\n    else if (exercise.id.includes('caged-5')) setSelectedShape('D');\n  }, [exercise.id]);\n\n  // Calculate the barre/root fret position for the selected key\n  const getRootFret = (): number => {\n    const shapeData = CAGED_SHAPES[selectedShape];\n    const keyIndex = KEYS.indexOf(selectedKey);\n    const baseKeyIndex = KEYS.indexOf(shapeData.baseKey);\n    \n    // Calculate how many semitones to move from the base key\n    const semitones = (keyIndex - baseKeyIndex + 12) % 12;\n    \n    // For shapes based on open chords (E, A, D), the base position is fret 0\n    // For C shape, base position is fret 3 (open C chord root is at fret 3 of A string)\n    // For G shape, base position is fret 3 (open G chord root is at fret 3 of low E string)\n    let baseFret = 0;\n    if (selectedShape === 'C') baseFret = 3;\n    if (selectedShape === 'G') baseFret = 3;\n    \n    return baseFret + semitones;\n  };\n\n  // Update fretboard when shape/key changes\n  useEffect(() => {\n    if (!isActive) return;\n    \n    const shapeData = CAGED_SHAPES[selectedShape];\n    const rootFret = getRootFret();\n    const positions: FretPosition[] = [];\n    \n    if (showChord) {\n      shapeData.chordPositions.forEach(pos => {\n        const fret = rootFret + pos.fretOffset;\n        // Apply string offset for 7-string guitars\n        const adjustedString = pos.string + stringOffset;\n        // Only include if fret and string are valid\n        if (fret >= 0 && fret <= 22 && adjustedString < stringCount) {\n          positions.push({\n            string: adjustedString,\n            fret: fret\n          });\n        }\n      });\n    }\n    \n    if (showScale) {\n      shapeData.scalePattern.forEach(([string, fretOffset]) => {\n        const fret = rootFret + fretOffset;\n        // Apply string offset for 7-string guitars\n        const adjustedString = string + stringOffset;\n        // Only include if fret and string are valid\n        if (fret >= 0 && fret <= 22 && adjustedString < stringCount) {\n          positions.push({ string: adjustedString, fret });\n        }\n      });\n    }\n    \n    setHighlightedPositions(positions);\n    setRootNote(selectedKey);\n  }, [selectedShape, selectedKey, showChord, showScale, isActive, setHighlightedPositions, setRootNote, stringOffset, stringCount]);\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      clearHighlights();\n      if (isDroneActive) {\n        stopDrone();\n        setDroneActive(false);\n      }\n    };\n  }, [clearHighlights, isDroneActive, setDroneActive]);\n\n  const handleToggleDrone = async () => {\n    await initAudio();\n    \n    if (isDroneActive) {\n      stopDrone();\n      setDroneActive(false);\n    } else {\n      setDroneConfig({ note: selectedKey, octave: 2 });\n      startDrone({ ...droneConfig, note: selectedKey, octave: 2 });\n      setDroneActive(true);\n    }\n  };\n\n  const handlePlayChord = async () => {\n    await initAudio();\n    // Play a simple major chord\n    const root = `${selectedKey}3`;\n    const third = `${KEYS[(KEYS.indexOf(selectedKey) + 4) % 12]}3`;\n    const fifth = `${KEYS[(KEYS.indexOf(selectedKey) + 7) % 12]}3`;\n    playChord([root, third, fifth], { duration: 2, velocity: 0.6 });\n  };\n\n  if (!isActive) {\n    return (\n      <div className=\"text-center py-8\">\n        <p style={{ color: 'var(--text-secondary)' }} className=\"mb-4\">\n          Click \"Start Exercise\" to explore the {CAGED_SHAPES[selectedShape]?.name || 'CAGED'} shape.\n        </p>\n        <p className=\"text-sm\" style={{ color: 'var(--text-muted)' }}>\n          Learn chord shapes and scale patterns across the fretboard.\n        </p>\n      </div>\n    );\n  }\n\n  const shapeData = CAGED_SHAPES[selectedShape];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Shape & Key Selection */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n            CAGED Shape\n          </label>\n          <div className=\"flex gap-2\">\n            {['C', 'A', 'G', 'E', 'D'].map(shape => (\n              <button\n                key={shape}\n                onClick={() => setSelectedShape(shape)}\n                className={`flex-1 py-2 rounded-lg font-bold transition-all ${\n                  selectedShape === shape ? 'btn-primary' : ''\n                }`}\n                style={selectedShape !== shape ? {\n                  backgroundColor: 'var(--bg-tertiary)',\n                  color: 'var(--text-secondary)'\n                } : {}}\n              >\n                {shape}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        <div>\n          <label className=\"block text-sm font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n            Key\n          </label>\n          <select\n            value={selectedKey}\n            onChange={(e) => setSelectedKey(e.target.value)}\n            className=\"w-full px-3 py-2 rounded-lg\"\n            style={{\n              backgroundColor: 'var(--bg-primary)',\n              color: 'var(--text-primary)',\n              border: '1px solid var(--border-color)'\n            }}\n          >\n            {KEYS.map(key => (\n              <option key={key} value={key}>{key} Major</option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Shape Info */}\n      <div \n        className=\"p-4 rounded-lg\"\n        style={{ backgroundColor: 'rgba(59, 130, 246, 0.1)' }}\n      >\n        <h4 className=\"font-medium mb-2\" style={{ color: 'var(--accent-primary)' }}>\n          {shapeData.name} - {selectedKey} Major\n        </h4>\n        <p className=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>\n          {shapeData.description}\n        </p>\n      </div>\n\n      {/* Display Options */}\n      <div className=\"flex flex-wrap gap-4\">\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showChord}\n            onChange={(e) => setShowChord(e.target.checked)}\n            className=\"rounded\"\n          />\n          <span className=\"text-sm\" style={{ color: 'var(--text-primary)' }}>Show Chord</span>\n        </label>\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showScale}\n            onChange={(e) => setShowScale(e.target.checked)}\n            className=\"rounded\"\n          />\n          <span className=\"text-sm\" style={{ color: 'var(--text-primary)' }}>Show Scale</span>\n        </label>\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showRoots}\n            onChange={(e) => setShowRoots(e.target.checked)}\n            className=\"rounded\"\n          />\n          <span className=\"text-sm\" style={{ color: 'var(--text-primary)' }}>Highlight Roots</span>\n        </label>\n      </div>\n\n      {/* Embedded Fretboard */}\n      <div className=\"card p-4\">\n        <Fretboard interactive={true} />\n      </div>\n\n      {/* Audio Controls */}\n      <div className=\"flex gap-3\">\n        <button\n          onClick={handleToggleDrone}\n          className={isDroneActive ? 'btn-danger' : 'btn-success'}\n        >\n          {isDroneActive ? '‚èπ Stop Drone' : '‚ñ∂ Play Drone'}\n        </button>\n        <button\n          onClick={handlePlayChord}\n          className=\"btn-secondary\"\n        >\n          üéµ Play Chord\n        </button>\n      </div>\n\n      {/* Practice Tips */}\n      <div \n        className=\"p-4 rounded-lg\"\n        style={{ backgroundColor: 'var(--bg-tertiary)' }}\n      >\n        <h4 className=\"font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n          Practice Tips\n        </h4>\n        <ul className=\"text-sm space-y-1 list-disc list-inside\" style={{ color: 'var(--text-secondary)' }}>\n          <li>Play the chord shape first, then find the scale notes around it</li>\n          <li>Identify the Root (red), 3rd, and 5th within the shape</li>\n          <li>Practice transitioning to the next CAGED shape up the neck</li>\n          <li>Try improvising using only notes within this position</li>\n          <li>Say the note names aloud as you play</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default CAGEDExercise;"],"names":["CAGED_SHAPES","KEYS","CAGEDExercise","exercise","stringCount","setHighlightedPositions","setRootNote","clearHighlights","useGuitarStore","droneConfig","setDroneConfig","isDroneActive","setDroneActive","useAudioStore","isActive","useExerciseStore","stringOffset","selectedShape","setSelectedShape","useState","selectedKey","setSelectedKey","showChord","setShowChord","showScale","setShowScale","showRoots","setShowRoots","useEffect","getRootFret","shapeData","keyIndex","baseKeyIndex","semitones","baseFret","rootFret","positions","pos","fret","adjustedString","string","fretOffset","stopDrone","handleToggleDrone","initAudio","startDrone","handlePlayChord","root","third","fifth","playChord","jsxs","jsx","shape","e","key","Fretboard"],"mappings":"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"}