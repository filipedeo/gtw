{"version":3,"file":"CAGEDExercise-6e0JK4Fb.js","sources":["../../src/components/CAGEDExercise.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Exercise } from '../types/exercise';\nimport { FretPosition } from '../types/guitar';\nimport { useGuitarStore } from '../stores/guitarStore';\nimport { useAudioStore } from '../stores/audioStore';\nimport { useExerciseStore } from '../stores/exerciseStore';\nimport { startDrone, stopDrone, playChord, initAudio } from '../lib/audioEngine';\nimport Fretboard from './Fretboard';\n\ninterface CAGEDExerciseProps {\n  exercise: Exercise;\n}\n\n// CAGED shape definitions - ALL positions are relative offsets from the barre/root position\n// This allows proper transposition to any key\nconst CAGED_SHAPES: Record<string, {\n  name: string;\n  description: string;\n  chordPositions: { string: number; fretOffset: number }[]; // Relative to barre position\n  rootString: number; // Which string has the root note\n  baseKey: string; // The key this shape is based on (for calculating transposition)\n  scalePattern: number[][]; // [string, fret offset from barre position]\n}> = {\n  'C': {\n    name: 'C Shape',\n    description: 'Based on the open C chord. Root on the 5th string. Requires a stretch when barred.',\n    rootString: 4, // A string (0-indexed from high E)\n    baseKey: 'C',\n    chordPositions: [\n      { string: 4, fretOffset: 0 }, // Root (barre position)\n      { string: 3, fretOffset: -1 }, // E (one fret below barre)\n      { string: 2, fretOffset: -3 }, // G (three frets below - open in C position)\n      { string: 1, fretOffset: -2 }, // C\n      { string: 0, fretOffset: -3 }, // E (open in C position)\n    ],\n    // Scale pattern relative to root position (fret 3 for C)\n    // All offsets are from the barre/root fret\n    scalePattern: [\n      [5, -3], [5, -1], [4, -3], [4, -1], [4, 0],\n      [3, -3], [3, -1], [2, -3], [2, -2], [2, 0],\n      [1, -3], [1, -2], [1, 0], [0, -3], [0, -1], [0, 0]\n    ]\n  },\n  'A': {\n    name: 'A Shape',\n    description: 'Based on the open A chord. Root on the 5th string. Most common barre shape.',\n    rootString: 4, // A string\n    baseKey: 'A',\n    chordPositions: [\n      { string: 4, fretOffset: 0 }, // Root (barre)\n      { string: 3, fretOffset: 2 }, // E\n      { string: 2, fretOffset: 2 }, // A\n      { string: 1, fretOffset: 2 }, // C#\n      { string: 0, fretOffset: 0 }, // E (barre)\n    ],\n    scalePattern: [\n      [5, 0], [5, 2], [4, 0], [4, 2], [4, 4],\n      [3, 1], [3, 2], [3, 4], [2, 1], [2, 2], [2, 4],\n      [1, 2], [1, 4], [0, 0], [0, 2], [0, 4]\n    ]\n  },\n  'G': {\n    name: 'G Shape',\n    description: 'Based on the open G chord. Root on the 6th string. Requires stretching.',\n    rootString: 5, // Low E string\n    baseKey: 'G',\n    chordPositions: [\n      { string: 5, fretOffset: 0 }, // Root (barre)\n      { string: 4, fretOffset: -1 }, // B\n      { string: 3, fretOffset: -3 }, // D (open in G position)\n      { string: 2, fretOffset: -3 }, // G (open in G position)\n      { string: 1, fretOffset: -3 }, // B (open in G position)\n      { string: 0, fretOffset: 0 }, // G\n    ],\n    scalePattern: [\n      [5, -3], [5, -1], [5, 0], [4, -3], [4, -1],\n      [3, -3], [3, -1], [3, 1], [2, -3], [2, -1],\n      [1, -3], [1, -1], [1, 0], [0, -3], [0, -1], [0, 0]\n    ]\n  },\n  'E': {\n    name: 'E Shape',\n    description: 'Based on the open E chord. Root on the 6th string. The most common barre chord.',\n    rootString: 5, // Low E string\n    baseKey: 'E',\n    chordPositions: [\n      { string: 5, fretOffset: 0 }, // Root (barre)\n      { string: 4, fretOffset: 2 }, // B\n      { string: 3, fretOffset: 2 }, // E\n      { string: 2, fretOffset: 1 }, // G#\n      { string: 1, fretOffset: 0 }, // B (barre)\n      { string: 0, fretOffset: 0 }, // E (barre)\n    ],\n    scalePattern: [\n      [5, 0], [5, 2], [5, 4], [4, 0], [4, 2], [4, 4],\n      [3, 1], [3, 2], [3, 4], [2, 1], [2, 2], [2, 4],\n      [1, 0], [1, 2], [1, 4], [0, 0], [0, 2], [0, 4]\n    ]\n  },\n  'D': {\n    name: 'D Shape',\n    description: 'Based on the open D chord. Root on the 4th string. Great for higher voicings.',\n    rootString: 3, // D string\n    baseKey: 'D',\n    chordPositions: [\n      { string: 3, fretOffset: 0 }, // Root (barre)\n      { string: 2, fretOffset: 2 }, // A\n      { string: 1, fretOffset: 3 }, // D\n      { string: 0, fretOffset: 2 }, // F#\n    ],\n    scalePattern: [\n      [4, 0], [4, 2], [4, 3], [3, 0], [3, 2],\n      [2, 0], [2, 2], [2, 3], [1, 0], [1, 2], [1, 3],\n      [0, 0], [0, 2], [0, 3]\n    ]\n  }\n};\n\nconst KEYS = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n\nconst CAGEDExercise: React.FC<CAGEDExerciseProps> = ({ exercise }) => {\n  const { setHighlightedPositions, setRootNote, clearHighlights } = useGuitarStore();\n  const { droneConfig, setDroneConfig, isDroneActive, setDroneActive } = useAudioStore();\n  const { isActive } = useExerciseStore();\n  \n  const [selectedShape, setSelectedShape] = useState<string>('C');\n  const [selectedKey, setSelectedKey] = useState<string>('C');\n  const [showChord, setShowChord] = useState(true);\n  const [showScale, setShowScale] = useState(false);\n  const [showRoots, setShowRoots] = useState(true);\n\n  // Get the shape based on exercise ID\n  useEffect(() => {\n    if (exercise.id.includes('caged-1')) setSelectedShape('C');\n    else if (exercise.id.includes('caged-2')) setSelectedShape('A');\n    else if (exercise.id.includes('caged-3')) setSelectedShape('G');\n    else if (exercise.id.includes('caged-4')) setSelectedShape('E');\n    else if (exercise.id.includes('caged-5')) setSelectedShape('D');\n  }, [exercise.id]);\n\n  // Calculate the barre/root fret position for the selected key\n  const getRootFret = (): number => {\n    const shapeData = CAGED_SHAPES[selectedShape];\n    const keyIndex = KEYS.indexOf(selectedKey);\n    const baseKeyIndex = KEYS.indexOf(shapeData.baseKey);\n    \n    // Calculate how many semitones to move from the base key\n    const semitones = (keyIndex - baseKeyIndex + 12) % 12;\n    \n    // For shapes based on open chords (E, A, D), the base position is fret 0\n    // For C shape, base position is fret 3 (open C chord root is at fret 3 of A string)\n    // For G shape, base position is fret 3 (open G chord root is at fret 3 of low E string)\n    let baseFret = 0;\n    if (selectedShape === 'C') baseFret = 3;\n    if (selectedShape === 'G') baseFret = 3;\n    \n    return baseFret + semitones;\n  };\n\n  // Update fretboard when shape/key changes\n  useEffect(() => {\n    if (!isActive) return;\n    \n    const shapeData = CAGED_SHAPES[selectedShape];\n    const rootFret = getRootFret();\n    const positions: FretPosition[] = [];\n    \n    if (showChord) {\n      shapeData.chordPositions.forEach(pos => {\n        const fret = rootFret + pos.fretOffset;\n        // Only include if fret is valid (>= 0)\n        if (fret >= 0 && fret <= 22) {\n          positions.push({\n            string: pos.string,\n            fret: fret\n          });\n        }\n      });\n    }\n    \n    if (showScale) {\n      shapeData.scalePattern.forEach(([string, fretOffset]) => {\n        const fret = rootFret + fretOffset;\n        // Only include if fret is valid (>= 0)\n        if (fret >= 0 && fret <= 22) {\n          positions.push({ string, fret });\n        }\n      });\n    }\n    \n    setHighlightedPositions(positions);\n    setRootNote(selectedKey);\n  }, [selectedShape, selectedKey, showChord, showScale, isActive, setHighlightedPositions, setRootNote]);\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      clearHighlights();\n      if (isDroneActive) {\n        stopDrone();\n        setDroneActive(false);\n      }\n    };\n  }, [clearHighlights, isDroneActive, setDroneActive]);\n\n  const handleToggleDrone = async () => {\n    await initAudio();\n    \n    if (isDroneActive) {\n      stopDrone();\n      setDroneActive(false);\n    } else {\n      setDroneConfig({ note: selectedKey, octave: 2 });\n      startDrone({ ...droneConfig, note: selectedKey, octave: 2 });\n      setDroneActive(true);\n    }\n  };\n\n  const handlePlayChord = async () => {\n    await initAudio();\n    // Play a simple major chord\n    const root = `${selectedKey}3`;\n    const third = `${KEYS[(KEYS.indexOf(selectedKey) + 4) % 12]}3`;\n    const fifth = `${KEYS[(KEYS.indexOf(selectedKey) + 7) % 12]}3`;\n    playChord([root, third, fifth], { duration: 2, velocity: 0.6 });\n  };\n\n  if (!isActive) {\n    return (\n      <div className=\"text-center py-8\">\n        <p style={{ color: 'var(--text-secondary)' }} className=\"mb-4\">\n          Click \"Start Exercise\" to explore the {CAGED_SHAPES[selectedShape]?.name || 'CAGED'} shape.\n        </p>\n        <p className=\"text-sm\" style={{ color: 'var(--text-muted)' }}>\n          Learn chord shapes and scale patterns across the fretboard.\n        </p>\n      </div>\n    );\n  }\n\n  const shapeData = CAGED_SHAPES[selectedShape];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Shape & Key Selection */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n            CAGED Shape\n          </label>\n          <div className=\"flex gap-2\">\n            {['C', 'A', 'G', 'E', 'D'].map(shape => (\n              <button\n                key={shape}\n                onClick={() => setSelectedShape(shape)}\n                className={`flex-1 py-2 rounded-lg font-bold transition-all ${\n                  selectedShape === shape ? 'btn-primary' : ''\n                }`}\n                style={selectedShape !== shape ? {\n                  backgroundColor: 'var(--bg-tertiary)',\n                  color: 'var(--text-secondary)'\n                } : {}}\n              >\n                {shape}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        <div>\n          <label className=\"block text-sm font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n            Key\n          </label>\n          <select\n            value={selectedKey}\n            onChange={(e) => setSelectedKey(e.target.value)}\n            className=\"w-full px-3 py-2 rounded-lg\"\n            style={{\n              backgroundColor: 'var(--bg-primary)',\n              color: 'var(--text-primary)',\n              border: '1px solid var(--border-color)'\n            }}\n          >\n            {KEYS.map(key => (\n              <option key={key} value={key}>{key} Major</option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Shape Info */}\n      <div \n        className=\"p-4 rounded-lg\"\n        style={{ backgroundColor: 'rgba(59, 130, 246, 0.1)' }}\n      >\n        <h4 className=\"font-medium mb-2\" style={{ color: 'var(--accent-primary)' }}>\n          {shapeData.name} - {selectedKey} Major\n        </h4>\n        <p className=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>\n          {shapeData.description}\n        </p>\n      </div>\n\n      {/* Display Options */}\n      <div className=\"flex flex-wrap gap-4\">\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showChord}\n            onChange={(e) => setShowChord(e.target.checked)}\n            className=\"rounded\"\n          />\n          <span className=\"text-sm\" style={{ color: 'var(--text-primary)' }}>Show Chord</span>\n        </label>\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showScale}\n            onChange={(e) => setShowScale(e.target.checked)}\n            className=\"rounded\"\n          />\n          <span className=\"text-sm\" style={{ color: 'var(--text-primary)' }}>Show Scale</span>\n        </label>\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showRoots}\n            onChange={(e) => setShowRoots(e.target.checked)}\n            className=\"rounded\"\n          />\n          <span className=\"text-sm\" style={{ color: 'var(--text-primary)' }}>Highlight Roots</span>\n        </label>\n      </div>\n\n      {/* Embedded Fretboard */}\n      <div className=\"card p-4\">\n        <Fretboard interactive={true} />\n      </div>\n\n      {/* Audio Controls */}\n      <div className=\"flex gap-3\">\n        <button\n          onClick={handleToggleDrone}\n          className={isDroneActive ? 'btn-danger' : 'btn-success'}\n        >\n          {isDroneActive ? '‚èπ Stop Drone' : '‚ñ∂ Play Drone'}\n        </button>\n        <button\n          onClick={handlePlayChord}\n          className=\"btn-secondary\"\n        >\n          üéµ Play Chord\n        </button>\n      </div>\n\n      {/* Practice Tips */}\n      <div \n        className=\"p-4 rounded-lg\"\n        style={{ backgroundColor: 'var(--bg-tertiary)' }}\n      >\n        <h4 className=\"font-medium mb-2\" style={{ color: 'var(--text-primary)' }}>\n          Practice Tips\n        </h4>\n        <ul className=\"text-sm space-y-1 list-disc list-inside\" style={{ color: 'var(--text-secondary)' }}>\n          <li>Play the chord shape first, then find the scale notes around it</li>\n          <li>Identify the Root (red), 3rd, and 5th within the shape</li>\n          <li>Practice transitioning to the next CAGED shape up the neck</li>\n          <li>Try improvising using only notes within this position</li>\n          <li>Say the note names aloud as you play</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default CAGEDExercise;"],"names":["CAGED_SHAPES","KEYS","CAGEDExercise","exercise","setHighlightedPositions","setRootNote","clearHighlights","useGuitarStore","droneConfig","setDroneConfig","isDroneActive","setDroneActive","useAudioStore","isActive","useExerciseStore","selectedShape","setSelectedShape","useState","selectedKey","setSelectedKey","showChord","setShowChord","showScale","setShowScale","showRoots","setShowRoots","useEffect","getRootFret","shapeData","keyIndex","baseKeyIndex","semitones","baseFret","rootFret","positions","pos","fret","string","fretOffset","stopDrone","handleToggleDrone","initAudio","startDrone","handlePlayChord","root","third","fifth","playChord","jsxs","jsx","shape","e","key","Fretboard"],"mappings":"kIAeA,MAAMA,EAOD,CACH,EAAK,CACH,KAAM,UACN,YAAa,qFACb,WAAY,EACZ,QAAS,IACT,eAAgB,CACd,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,CAAG,EAI9B,aAAc,CACZ,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,EACzC,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,EACzC,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,CAAA,CACnD,EAEF,EAAK,CACH,KAAM,UACN,YAAa,8EACb,WAAY,EACZ,QAAS,IACT,eAAgB,CACd,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,CAAE,EAE7B,aAAc,CACZ,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EACrC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAC7C,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAA,CACvC,EAEF,EAAK,CACH,KAAM,UACN,YAAa,0EACb,WAAY,EACZ,QAAS,IACT,eAAgB,CACd,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,EAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,CAAE,EAE7B,aAAc,CACZ,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EACzC,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EACzC,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,EAAE,EAAG,CAAC,EAAG,CAAC,CAAA,CACnD,EAEF,EAAK,CACH,KAAM,UACN,YAAa,kFACb,WAAY,EACZ,QAAS,IACT,eAAgB,CACd,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,CAAE,EAE7B,aAAc,CACZ,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAC7C,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAC7C,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAA,CAC/C,EAEF,EAAK,CACH,KAAM,UACN,YAAa,gFACb,WAAY,EACZ,QAAS,IACT,eAAgB,CACd,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,EACzB,CAAE,OAAQ,EAAG,WAAY,CAAA,CAAE,EAE7B,aAAc,CACZ,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EACrC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAC7C,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAA,CACvB,CAEJ,EAEMC,EAAO,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,GAAG,EAEvEC,EAA8C,CAAC,CAAE,SAAAC,KAAe,CACpE,KAAM,CAAE,wBAAAC,EAAyB,YAAAC,EAAa,gBAAAC,CAAA,EAAoBC,EAAA,EAC5D,CAAE,YAAAC,EAAa,eAAAC,EAAgB,cAAAC,EAAe,eAAAC,CAAA,EAAmBC,EAAA,EACjE,CAAE,SAAAC,CAAA,EAAaC,EAAA,EAEf,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAAiB,GAAG,EACxD,CAACC,EAAaC,CAAc,EAAIF,EAAAA,SAAiB,GAAG,EACpD,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAS,EAAI,EACzC,CAACK,EAAWC,CAAY,EAAIN,EAAAA,SAAS,EAAK,EAC1C,CAACO,EAAWC,CAAY,EAAIR,EAAAA,SAAS,EAAI,EAG/CS,EAAAA,UAAU,IAAM,CACVvB,EAAS,GAAG,SAAS,SAAS,IAAoB,GAAG,EAChDA,EAAS,GAAG,SAAS,SAAS,IAAoB,GAAG,EACrDA,EAAS,GAAG,SAAS,SAAS,IAAoB,GAAG,EACrDA,EAAS,GAAG,SAAS,SAAS,IAAoB,GAAG,EACrDA,EAAS,GAAG,SAAS,SAAS,KAAoB,GAAG,CAChE,EAAG,CAACA,EAAS,EAAE,CAAC,EAGhB,MAAMwB,EAAc,IAAc,CAChC,MAAMC,EAAY5B,EAAae,CAAa,EACtCc,EAAW5B,EAAK,QAAQiB,CAAW,EACnCY,EAAe7B,EAAK,QAAQ2B,EAAU,OAAO,EAG7CG,GAAaF,EAAWC,EAAe,IAAM,GAKnD,IAAIE,EAAW,EACf,OAAIjB,IAAkB,MAAKiB,EAAW,GAClCjB,IAAkB,MAAKiB,EAAW,GAE/BA,EAAWD,CACpB,EAGAL,EAAAA,UAAU,IAAM,CACd,GAAI,CAACb,EAAU,OAEf,MAAMe,EAAY5B,EAAae,CAAa,EACtCkB,EAAWN,EAAA,EACXO,EAA4B,CAAA,EAE9Bd,GACFQ,EAAU,eAAe,QAAQO,GAAO,CACtC,MAAMC,EAAOH,EAAWE,EAAI,WAExBC,GAAQ,GAAKA,GAAQ,IACvBF,EAAU,KAAK,CACb,OAAQC,EAAI,OACZ,KAAAC,CAAA,CACD,CAEL,CAAC,EAGCd,GACFM,EAAU,aAAa,QAAQ,CAAC,CAACS,EAAQC,CAAU,IAAM,CACvD,MAAMF,EAAOH,EAAWK,EAEpBF,GAAQ,GAAKA,GAAQ,IACvBF,EAAU,KAAK,CAAE,OAAAG,EAAQ,KAAAD,CAAA,CAAM,CAEnC,CAAC,EAGHhC,EAAwB8B,CAAS,EACjC7B,EAAYa,CAAW,CACzB,EAAG,CAACH,EAAeG,EAAaE,EAAWE,EAAWT,EAAUT,EAAyBC,CAAW,CAAC,EAGrGqB,EAAAA,UAAU,IACD,IAAM,CACXpB,EAAA,EACII,IACF6B,EAAA,EACA5B,EAAe,EAAK,EAExB,EACC,CAACL,EAAiBI,EAAeC,CAAc,CAAC,EAEnD,MAAM6B,EAAoB,SAAY,CACpC,MAAMC,EAAA,EAEF/B,GACF6B,EAAA,EACA5B,EAAe,EAAK,IAEpBF,EAAe,CAAE,KAAMS,EAAa,OAAQ,EAAG,EAC/CwB,EAAW,CAAE,GAAGlC,EAAa,KAAMU,EAAa,OAAQ,EAAG,EAC3DP,EAAe,EAAI,EAEvB,EAEMgC,EAAkB,SAAY,CAClC,MAAMF,EAAA,EAEN,MAAMG,EAAO,GAAG1B,CAAW,IACrB2B,EAAQ,GAAG5C,GAAMA,EAAK,QAAQiB,CAAW,EAAI,GAAK,EAAE,CAAC,IACrD4B,EAAQ,GAAG7C,GAAMA,EAAK,QAAQiB,CAAW,EAAI,GAAK,EAAE,CAAC,IAC3D6B,EAAU,CAACH,EAAMC,EAAOC,CAAK,EAAG,CAAE,SAAU,EAAG,SAAU,GAAK,CAChE,EAEA,GAAI,CAACjC,EACH,OACEmC,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,OAAC,KAAE,MAAO,CAAE,MAAO,yBAA2B,UAAU,OAAO,SAAA,CAAA,yCACtBhD,EAAae,CAAa,GAAG,MAAQ,QAAQ,SAAA,EACtF,EACAkC,EAAAA,IAAC,KAAE,UAAU,UAAU,MAAO,CAAE,MAAO,mBAAA,EAAuB,SAAA,6DAAA,CAE9D,CAAA,EACF,EAIJ,MAAMrB,EAAY5B,EAAae,CAAa,EAE5C,OACEiC,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,MAAO,CAAE,MAAO,qBAAA,EAAyB,SAAA,aAAA,CAE3F,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,aACZ,SAAA,CAAC,IAAK,IAAK,IAAK,IAAK,GAAG,EAAE,IAAIC,GAC7BD,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMjC,EAAiBkC,CAAK,EACrC,UAAW,mDACTnC,IAAkBmC,EAAQ,cAAgB,EAC5C,GACA,MAAOnC,IAAkBmC,EAAQ,CAC/B,gBAAiB,qBACjB,MAAO,uBAAA,EACL,CAAA,EAEH,SAAAA,CAAA,EAVIA,CAAA,CAYR,CAAA,CACH,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,MAAO,CAAE,MAAO,qBAAA,EAAyB,SAAA,KAAA,CAE3F,EACAA,EAAAA,IAAC,SAAA,CACC,MAAO/B,EACP,SAAWiC,GAAMhC,EAAegC,EAAE,OAAO,KAAK,EAC9C,UAAU,8BACV,MAAO,CACL,gBAAiB,oBACjB,MAAO,sBACP,OAAQ,+BAAA,EAGT,WAAK,IAAIC,GACRJ,OAAC,SAAA,CAAiB,MAAOI,EAAM,SAAA,CAAAA,EAAI,QAAA,CAAA,EAAtBA,CAA4B,CAC1C,CAAA,CAAA,CACH,CAAA,CACF,CAAA,EACF,EAGAJ,EAAAA,KAAC,MAAA,CACC,UAAU,iBACV,MAAO,CAAE,gBAAiB,yBAAA,EAE1B,SAAA,CAAAA,OAAC,MAAG,UAAU,mBAAmB,MAAO,CAAE,MAAO,yBAC9C,SAAA,CAAApB,EAAU,KAAK,MAAIV,EAAY,QAAA,EAClC,EACA+B,EAAAA,IAAC,IAAA,CAAE,UAAU,UAAU,MAAO,CAAE,MAAO,uBAAA,EACpC,SAAArB,EAAU,WAAA,CACb,CAAA,CAAA,CAAA,EAIFoB,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,yCACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAAS7B,EACT,SAAW+B,GAAM9B,EAAa8B,EAAE,OAAO,OAAO,EAC9C,UAAU,SAAA,CAAA,EAEZF,EAAAA,IAAC,QAAK,UAAU,UAAU,MAAO,CAAE,MAAO,qBAAA,EAAyB,SAAA,YAAA,CAAU,CAAA,EAC/E,EACAD,EAAAA,KAAC,QAAA,CAAM,UAAU,yCACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAAS3B,EACT,SAAW6B,GAAM5B,EAAa4B,EAAE,OAAO,OAAO,EAC9C,UAAU,SAAA,CAAA,EAEZF,EAAAA,IAAC,QAAK,UAAU,UAAU,MAAO,CAAE,MAAO,qBAAA,EAAyB,SAAA,YAAA,CAAU,CAAA,EAC/E,EACAD,EAAAA,KAAC,QAAA,CAAM,UAAU,yCACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAASzB,EACT,SAAW2B,GAAM1B,EAAa0B,EAAE,OAAO,OAAO,EAC9C,UAAU,SAAA,CAAA,EAEZF,EAAAA,IAAC,QAAK,UAAU,UAAU,MAAO,CAAE,MAAO,qBAAA,EAAyB,SAAA,iBAAA,CAAe,CAAA,CAAA,CACpF,CAAA,EACF,EAGAA,EAAAA,IAAC,OAAI,UAAU,WACb,eAACI,EAAA,CAAU,YAAa,GAAM,CAAA,CAChC,EAGAL,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAST,EACT,UAAW9B,EAAgB,aAAe,cAEzC,WAAgB,eAAiB,cAAA,CAAA,EAEpCuC,EAAAA,IAAC,SAAA,CACC,QAASN,EACT,UAAU,gBACX,SAAA,eAAA,CAAA,CAED,EACF,EAGAK,EAAAA,KAAC,MAAA,CACC,UAAU,iBACV,MAAO,CAAE,gBAAiB,oBAAA,EAE1B,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mBAAmB,MAAO,CAAE,MAAO,qBAAA,EAAyB,SAAA,eAAA,CAE1E,EACAD,OAAC,MAAG,UAAU,0CAA0C,MAAO,CAAE,MAAO,yBACtE,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,iEAAA,CAA+D,EACnEA,EAAAA,IAAC,MAAG,SAAA,wDAAA,CAAsD,EAC1DA,EAAAA,IAAC,MAAG,SAAA,4DAAA,CAA0D,EAC9DA,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,EACzDA,EAAAA,IAAC,MAAG,SAAA,sCAAA,CAAoC,CAAA,CAAA,CAC1C,CAAA,CAAA,CAAA,CACF,EACF,CAEJ"}