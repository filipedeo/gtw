import{u as G,c as H,d as R,r as c,n as w,s as F,j as e,F as U,g as T,i as M,f as O,p as $}from"./index-CwJpEdkT.js";import{M as k,g as Y}from"./theoryEngine-Kyf7K1I3.js";import{D as q}from"./DisplayModeToggle-BpGImax5.js";import{P as J}from"./PracticeRating-BzD00yR0.js";import"./tone-BWNjRQgH.js";const L=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"];function A(j,u,h,v,N){const x=Y(w(j),u);if(!x||x.length===0)return[];const S=x.map(t=>w(t)),g=[];let d=N;for(let t=0;t<v;t++){const o=[];for(let n=0;n<=22;n++){const f=T({string:t,fret:n},h),a=w(f.replace(/\d/,""));S.includes(a)&&o.push(n)}let m=[],s=1/0;for(let n=0;n<=o.length-2;n++){const i=[o[n],o[n+1]];if(i[1]-i[0]<=4){const f=(i[0]+i[1])/2,a=Math.abs(f-d-1);a<s&&(s=a,m=i)}}m.length===2&&(m.forEach(n=>g.push({string:t,fret:n})),d=Math.max(d,m[0]))}return g}const _=({exercise:j})=>{const{stringCount:u,tuning:h,setHighlightedPositions:v,setSecondaryHighlightedPositions:N,setRootNote:x,clearHighlights:S}=G(),{droneConfig:g,setDroneConfig:d,isDroneActive:t,setDroneActive:o}=H(),{isActive:m}=R(),[s,n]=c.useState("C"),[i,f]=c.useState(0),[a,I]=c.useState(0),[P,C]=c.useState(!1),y=k[i],D=c.useCallback(()=>{if(!m)return;const r=A(s,y.name,h,u,a);v(r),x(w(s)),N([])},[m,s,y,h,u,a,v,N,x]);c.useEffect(()=>{D()},[D]),c.useEffect(()=>{t&&d({note:s,octave:2})},[s,t,d]),c.useEffect(()=>()=>{S(),t&&(F(),o(!1))},[S,t,o]);const K=async()=>{await M(),t?(F(),o(!1)):(d({note:s,octave:2}),O({note:s,octave:2,volume:g.volume,waveform:g.waveform}),o(!0))},z=async()=>{if(P)return;await M(),C(!0);const p=[...A(s,y.name,h,u,a)].sort((l,b)=>l.string!==b.string?l.string-b.string:l.fret-b.fret),E=.25;for(let l=0;l<p.length;l++){const b=p[l],B=T(b,h);$(B,{duration:.4,velocity:.7,delay:l*E})}setTimeout(()=>{C(!1)},p.length*E*1e3+500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Mode / Scale"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((r,p)=>e.jsx("button",{onClick:()=>f(p),className:`px-3 py-2 rounded-lg font-medium transition-all text-sm ${i===p?"btn-primary":""}`,style:i!==p?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:r.displayName},r.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:L.map(r=>e.jsx("button",{onClick:()=>n(r),className:`px-3 py-2 rounded-lg font-medium transition-all min-w-[44px] ${s===r?"btn-primary":""}`,style:s!==r?{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"}:{},children:r},r))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:["Starting Fret Position: ",a]}),e.jsx("input",{type:"range",min:0,max:12,value:a,onChange:r=>I(parseInt(r.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs",style:{color:"var(--text-muted)"},children:[e.jsx("span",{children:"Open"}),e.jsx("span",{children:"12th Fret"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[e.jsxs("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:[y.displayName," (",s,") - 2 Notes Per String"]}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Characteristic note: ",e.jsx("strong",{children:y.characteristicNote})," ","â€”"," ","2 notes per string starting near fret ",a,". This creates natural one-finger-per-fret patterns optimized for bass."]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(q,{})}),e.jsx("div",{className:"card p-4",children:e.jsx(U,{interactive:!0})}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("button",{onClick:K,className:t?"btn-danger":"btn-success",children:t?"Stop Drone":"Play Drone"}),e.jsx("button",{onClick:z,disabled:P,className:"btn-secondary disabled:opacity-50",children:P?"Playing...":"Play Scale"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--text-primary)"},children:"Practice Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[e.jsx("li",{children:"2 notes per string creates natural one-finger-per-fret bass patterns"}),e.jsx("li",{children:"Keep your thumb anchored behind the neck for stability"}),e.jsx("li",{children:"Use one finger per fret within each position (index and middle, or index and ring)"}),e.jsx("li",{children:"Practice shifting cleanly between positions -- minimize hand movement"}),e.jsx("li",{children:"Use alternating right-hand fingers (index-middle) for consistent tone"}),e.jsx("li",{children:"Start slow with a metronome and increase speed only when clean"}),e.jsx("li",{children:"Use the drone to hear how each scale degree relates to the tonal center"}),e.jsx("li",{children:"Try playing the pattern ascending, then descending without pausing"})]})]}),e.jsx(J,{exerciseId:j.id,exerciseType:j.type})]})};export{_ as default,A as getTwoNPSPositions};
