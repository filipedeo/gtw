import{u as w,c as D,d as E,r as o,n as M,e as A,s as v,j as e,i as P,f as T}from"./index-CgE2jpUT.js";import{M as f,g as z}from"./theoryEngine-BOu9Y-Do.js";import{D as K}from"./DisplayModeToggle--Lm4rkzo.js";import"./tone-BDbzsNEa.js";const q=({exercise:F})=>{const{stringCount:m,tuning:h,setHighlightedPositions:u,setRootNote:x,clearHighlights:g}=w(),{droneConfig:p,setDroneConfig:l,isDroneActive:t,setDroneActive:a}=D(),{isActive:n}=E(),[i,b]=o.useState("dorian"),[r,j]=o.useState("A"),[y,N]=o.useState(!0),C=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],c=f.find(s=>s.name===i);o.useEffect(()=>{if(n)try{const s=M(r),d=z(s,i);if(d&&d.length>0){const k=A(d,h,m,12);u(k),x(s)}}catch(s){console.error("Error getting mode notes:",s)}},[i,r,y,n,m,h,u,x]),o.useEffect(()=>{t&&l({note:r,octave:2})},[r,t,l]),o.useEffect(()=>()=>{g(),t&&(v(),a(!1))},[g,t,a]);const S=async()=>{await P(),t?(v(),a(!1)):(l({note:r,octave:2}),T({note:r,octave:2,volume:p.volume,waveform:p.waveform}),a(!0))};return n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Mode"}),e.jsx("select",{value:i,onChange:s=>b(s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:f.map(s=>e.jsx("option",{value:s.name,children:s.displayName},s.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Key"}),e.jsx("select",{value:r,onChange:s=>j(s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:C.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),c&&e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--accent-primary)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--accent-primary)"},children:c.displayName}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Characteristic Note:"})," ",c.characteristicNote]}),e.jsx("p",{className:"text-sm mt-2",style:{color:"var(--text-secondary)"},children:"Focus on emphasizing the characteristic note in your playing. This is what gives the mode its unique sound."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Drone"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Play a ",r," drone to practice over"]})]}),e.jsx("button",{onClick:S,className:"px-6 py-2 rounded-lg font-medium transition-colors text-white",style:{backgroundColor:t?"var(--error)":"var(--success)"},children:t?"Stop Drone":"Start Drone"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[e.jsx("input",{type:"checkbox",checked:y,onChange:s=>N(s.target.checked),className:"rounded"}),"Highlight characteristic note"]}),e.jsx(K,{})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--warning)"},children:[e.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--warning)"},children:"Practice Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",style:{color:"var(--text-secondary)"},children:[e.jsxs("li",{children:["Start and end your phrases on the root note (",r,")"]}),e.jsxs("li",{children:["Emphasize the characteristic note (",c?.characteristicNote,")"]}),e.jsx("li",{children:"Try playing the scale ascending and descending"}),e.jsx("li",{children:"Create short melodic phrases using the highlighted notes"}),e.jsx("li",{children:"Listen to how the mode sounds against the drone"})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:'Click "Start Exercise" to begin practicing modes.'}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"You'll be able to select a mode and key, then practice with a drone backing."})]})};export{q as default};
